2024-07-08 00:47:58,067 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h1m7s258ms).
2024-07-08 01:49:01,709 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h1m3s445ms).
2024-07-08 02:20:34,665 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=31m33s156ms).
2024-07-08 02:24:58,203 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m23s538ms).
2024-07-08 02:27:32,016 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2m33s813ms).
2024-07-08 02:29:03,354 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m31s339ms).
2024-07-08 03:18:57,376 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=49m54s4ms).
2024-07-08 05:19:25,744 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2h28s385ms).
2024-07-08 06:53:25,555 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h33m59s201ms).
2024-07-08 06:59:25,608 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Retrograde clock change detected (housekeeper delta=29s691ms), soft-evicting connections from pool.
2024-07-08 07:03:58,605 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2m2s913ms).
2024-07-08 07:15:01,659 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 07:15:01,665 [INFO] org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl [SpringApplicationShutdownHook] HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2024-07-08 07:15:01,670 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 07:15:01,810 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 07:15:01,825 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account
2024-07-08 07:15:01,846 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account_seq
2024-07-08 07:15:01,854 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album
2024-07-08 07:15:01,880 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album_seq
2024-07-08 07:15:01,891 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo
2024-07-08 07:15:01,904 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo_seq
2024-07-08 07:15:01,936 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-07-08 07:15:01,950 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-07-08 07:15:11,388 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Starting SpringRestDemoApplication using Java 17.0.11 with PID 88607 (/Users/olaidehammed/Downloads/SpringRestDemo/target/classes started by olaidehammed in /Users/olaidehammed/Downloads/SpringRestDemo)
2024-07-08 07:15:11,392 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-07-08 07:15:12,916 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-08 07:15:13,046 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 110 ms. Found 3 JPA repository interfaces.
2024-07-08 07:15:14,451 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-07-08 07:15:14,476 [INFO] org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2024-07-08 07:15:14,477 [INFO] org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.4]
2024-07-08 07:15:14,685 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2024-07-08 07:15:14,688 [INFO] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 3190 ms
2024-07-08 07:15:15,003 [INFO] org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-08 07:15:15,122 [INFO] org.hibernate.Version [main] HHH000412: Hibernate ORM core version 6.1.6.Final
2024-07-08 07:15:15,448 [WARN] org.hibernate.orm.deprecation [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-07-08 07:15:15,694 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2024-07-08 07:15:16,040 [INFO] com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6b6def36
2024-07-08 07:15:16,044 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2024-07-08 07:15:16,155 [INFO] SQL dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-07-08 07:15:17,382 [DEBUG] org.hibernate.SQL [main] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 07:15:17,401 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.album' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 07:15:17,409 [DEBUG] org.hibernate.SQL [main] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 07:15:17,412 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.photo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 07:15:17,417 [DEBUG] org.hibernate.SQL [main] drop table if exists account
2024-07-08 07:15:17,426 [DEBUG] org.hibernate.SQL [main] drop table if exists account_seq
2024-07-08 07:15:17,432 [DEBUG] org.hibernate.SQL [main] drop table if exists album
2024-07-08 07:15:17,437 [DEBUG] org.hibernate.SQL [main] drop table if exists album_seq
2024-07-08 07:15:17,442 [DEBUG] org.hibernate.SQL [main] drop table if exists photo
2024-07-08 07:15:17,447 [DEBUG] org.hibernate.SQL [main] drop table if exists photo_seq
2024-07-08 07:15:17,457 [DEBUG] org.hibernate.SQL [main] create table account (id bigint not null, authorities varchar(255), email varchar(255), password varchar(255), primary key (id)) engine=InnoDB
2024-07-08 07:15:17,487 [DEBUG] org.hibernate.SQL [main] create table account_seq (next_val bigint) engine=InnoDB
2024-07-08 07:15:17,516 [DEBUG] org.hibernate.SQL [main] insert into account_seq values ( 1 )
2024-07-08 07:15:17,523 [DEBUG] org.hibernate.SQL [main] create table album (id bigint not null, description varchar(255), name varchar(255), account_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 07:15:17,539 [DEBUG] org.hibernate.SQL [main] create table album_seq (next_val bigint) engine=InnoDB
2024-07-08 07:15:17,552 [DEBUG] org.hibernate.SQL [main] insert into album_seq values ( 1 )
2024-07-08 07:15:17,556 [DEBUG] org.hibernate.SQL [main] create table photo (id bigint not null, description varchar(255), file_name varchar(255), name varchar(255), original_file_name varchar(255), album_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 07:15:17,571 [DEBUG] org.hibernate.SQL [main] create table photo_seq (next_val bigint) engine=InnoDB
2024-07-08 07:15:17,594 [DEBUG] org.hibernate.SQL [main] insert into photo_seq values ( 1 )
2024-07-08 07:15:17,599 [DEBUG] org.hibernate.SQL [main] alter table account add constraint UK_q0uja26qgu1atulenwup9rxyr unique (email)
2024-07-08 07:15:17,613 [DEBUG] org.hibernate.SQL [main] alter table album add constraint FK5jtlch5qo4kdolwqbfyrf4e02 foreign key (account_id) references account (id)
2024-07-08 07:15:17,647 [DEBUG] org.hibernate.SQL [main] alter table photo add constraint FKpy64km2p72eoy5rwh31ria0vx foreign key (album_id) references album (id)
2024-07-08 07:15:17,688 [INFO] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-07-08 07:15:17,705 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 07:15:19,319 [WARN] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-08 07:15:19,822 [INFO] org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@530bd77b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@58a9e64d, org.springframework.security.web.context.SecurityContextHolderFilter@256c6f7a, org.springframework.security.web.header.HeaderWriterFilter@72115c48, org.springframework.security.web.authentication.logout.LogoutFilter@2ba9765b, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@63a9af28, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@81cd90e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6e53bb4f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7657d29f, org.springframework.security.web.session.SessionManagementFilter@1d884a19, org.springframework.security.web.access.ExceptionTranslationFilter@13868c41, org.springframework.security.web.access.intercept.AuthorizationFilter@6cac0334]
2024-07-08 07:15:20,246 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-07-08 07:15:20,267 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Started SpringRestDemoApplication in 9.668 seconds (process running for 10.486)
2024-07-08 07:15:20,519 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 07:15:20,535 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 07:15:20,588 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 07:15:20,764 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 07:15:20,765 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 07:15:20,770 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 07:16:07,829 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-08 07:16:07,830 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-07-08 07:16:07,833 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Completed initialization in 2 ms
2024-07-08 07:16:09,650 [INFO] org.springdoc.api.AbstractOpenApiResource [http-nio-8080-exec-8] Init duration for springdoc-openapi is: 942 ms
2024-07-08 07:16:37,136 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-9] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 07:17:24,579 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 07:17:24,587 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] select next_val as id_val from album_seq for update
2024-07-08 07:17:24,588 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] update album_seq set next_val= ? where next_val=?
2024-07-08 07:17:24,598 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] insert into album (account_id, description, name, id) values (?, ?, ?, ?)
2024-07-08 07:17:44,121 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 07:17:44,137 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select a1_0.id,a1_0.account_id,a1_0.description,a1_0.name from album a1_0 where a1_0.account_id=?
2024-07-08 07:18:14,571 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-7] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 07:18:14,594 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-7] select a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name from album a1_0 join account a2_0 on a2_0.id=a1_0.account_id where a1_0.id=?
2024-07-08 07:22:23,338 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 07:22:23,340 [INFO] org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl [SpringApplicationShutdownHook] HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2024-07-08 07:22:23,342 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 07:22:23,356 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 07:22:23,373 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account
2024-07-08 07:22:23,384 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account_seq
2024-07-08 07:22:23,395 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album
2024-07-08 07:22:23,412 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album_seq
2024-07-08 07:22:23,421 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo
2024-07-08 07:22:23,431 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo_seq
2024-07-08 07:22:23,451 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-07-08 07:22:23,464 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-07-08 07:22:32,624 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Starting SpringRestDemoApplication using Java 17.0.11 with PID 93788 (/Users/olaidehammed/Downloads/SpringRestDemo/target/classes started by olaidehammed in /Users/olaidehammed/Downloads/SpringRestDemo)
2024-07-08 07:22:32,627 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-07-08 07:22:34,571 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-08 07:22:34,708 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 118 ms. Found 3 JPA repository interfaces.
2024-07-08 07:22:35,815 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-07-08 07:22:35,838 [INFO] org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2024-07-08 07:22:35,838 [INFO] org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.4]
2024-07-08 07:22:36,009 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2024-07-08 07:22:36,010 [INFO] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 3166 ms
2024-07-08 07:22:36,297 [INFO] org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-08 07:22:36,406 [INFO] org.hibernate.Version [main] HHH000412: Hibernate ORM core version 6.1.6.Final
2024-07-08 07:22:36,703 [WARN] org.hibernate.orm.deprecation [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-07-08 07:22:36,903 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2024-07-08 07:22:37,211 [INFO] com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@b5c902
2024-07-08 07:22:37,214 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2024-07-08 07:22:37,296 [INFO] SQL dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-07-08 07:22:38,697 [DEBUG] org.hibernate.SQL [main] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 07:22:38,726 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.album' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 07:22:38,737 [DEBUG] org.hibernate.SQL [main] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 07:22:38,740 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.photo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 07:22:38,756 [DEBUG] org.hibernate.SQL [main] drop table if exists account
2024-07-08 07:22:38,791 [DEBUG] org.hibernate.SQL [main] drop table if exists account_seq
2024-07-08 07:22:38,800 [DEBUG] org.hibernate.SQL [main] drop table if exists album
2024-07-08 07:22:38,806 [DEBUG] org.hibernate.SQL [main] drop table if exists album_seq
2024-07-08 07:22:38,825 [DEBUG] org.hibernate.SQL [main] drop table if exists photo
2024-07-08 07:22:38,840 [DEBUG] org.hibernate.SQL [main] drop table if exists photo_seq
2024-07-08 07:22:38,874 [DEBUG] org.hibernate.SQL [main] create table account (id bigint not null, authorities varchar(255), email varchar(255), password varchar(255), primary key (id)) engine=InnoDB
2024-07-08 07:22:38,895 [DEBUG] org.hibernate.SQL [main] create table account_seq (next_val bigint) engine=InnoDB
2024-07-08 07:22:38,919 [DEBUG] org.hibernate.SQL [main] insert into account_seq values ( 1 )
2024-07-08 07:22:38,926 [DEBUG] org.hibernate.SQL [main] create table album (id bigint not null, description varchar(255), name varchar(255), account_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 07:22:38,959 [DEBUG] org.hibernate.SQL [main] create table album_seq (next_val bigint) engine=InnoDB
2024-07-08 07:22:39,020 [DEBUG] org.hibernate.SQL [main] insert into album_seq values ( 1 )
2024-07-08 07:22:39,033 [DEBUG] org.hibernate.SQL [main] create table photo (id bigint not null, description varchar(255), file_name varchar(255), name varchar(255), original_file_name varchar(255), album_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 07:22:39,076 [DEBUG] org.hibernate.SQL [main] create table photo_seq (next_val bigint) engine=InnoDB
2024-07-08 07:22:39,090 [DEBUG] org.hibernate.SQL [main] insert into photo_seq values ( 1 )
2024-07-08 07:22:39,095 [DEBUG] org.hibernate.SQL [main] alter table account add constraint UK_q0uja26qgu1atulenwup9rxyr unique (email)
2024-07-08 07:22:39,121 [DEBUG] org.hibernate.SQL [main] alter table album add constraint FK5jtlch5qo4kdolwqbfyrf4e02 foreign key (account_id) references account (id)
2024-07-08 07:22:39,172 [DEBUG] org.hibernate.SQL [main] alter table photo add constraint FKpy64km2p72eoy5rwh31ria0vx foreign key (album_id) references album (id)
2024-07-08 07:22:39,219 [INFO] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-07-08 07:22:39,239 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 07:22:41,687 [WARN] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-08 07:22:42,245 [INFO] org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@755a90a6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5862ab28, org.springframework.security.web.context.SecurityContextHolderFilter@42ea14b8, org.springframework.security.web.header.HeaderWriterFilter@62d21afd, org.springframework.security.web.authentication.logout.LogoutFilter@49bc1f6c, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@38f569d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@74d3b331, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@e2696e8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@21202507, org.springframework.security.web.session.SessionManagementFilter@188058fb, org.springframework.security.web.access.ExceptionTranslationFilter@71c74011, org.springframework.security.web.access.intercept.AuthorizationFilter@567baa55]
2024-07-08 07:22:42,600 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-07-08 07:22:42,615 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Started SpringRestDemoApplication in 10.791 seconds (process running for 11.481)
2024-07-08 07:22:42,833 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 07:22:42,846 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 07:22:42,887 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 07:22:43,083 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 07:22:43,084 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 07:22:43,088 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 07:24:01,428 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-08 07:24:01,429 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-07-08 07:24:01,432 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Completed initialization in 3 ms
2024-07-08 07:24:02,757 [INFO] org.springdoc.api.AbstractOpenApiResource [http-nio-8080-exec-8] Init duration for springdoc-openapi is: 777 ms
2024-07-08 07:24:34,143 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-9] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 07:25:12,725 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-5] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 07:25:12,733 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-5] select next_val as id_val from album_seq for update
2024-07-08 07:25:12,735 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-5] update album_seq set next_val= ? where next_val=?
2024-07-08 07:25:12,742 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-5] insert into album (account_id, description, name, id) values (?, ?, ?, ?)
2024-07-08 08:33:00,925 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h6m52s739ms).
2024-07-08 08:49:05,977 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=15m34s983ms).
2024-07-08 08:55:25,970 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=5m49s988ms).
2024-07-08 09:12:05,619 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=15m39s637ms).
2024-07-08 09:14:18,685 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m43s60ms).
2024-07-08 09:16:52,288 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-7] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 09:17:20,223 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-8] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 09:17:20,271 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-8] select a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name from album a1_0 join account a2_0 on a2_0.id=a1_0.account_id where a1_0.id=?
2024-07-08 10:36:48,779 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Starting SpringRestDemoApplication using Java 17.0.11 with PID 21905 (/Users/olaidehammed/Downloads/SpringRestDemo/target/classes started by olaidehammed in /Users/olaidehammed/Downloads/SpringRestDemo)
2024-07-08 10:36:48,782 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-07-08 10:36:50,103 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-08 10:36:50,243 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 115 ms. Found 3 JPA repository interfaces.
2024-07-08 10:36:51,153 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-07-08 10:36:51,177 [INFO] org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2024-07-08 10:36:51,178 [INFO] org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.4]
2024-07-08 10:36:51,386 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2024-07-08 10:36:51,387 [INFO] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2520 ms
2024-07-08 10:36:51,630 [INFO] org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-08 10:36:51,735 [INFO] org.hibernate.Version [main] HHH000412: Hibernate ORM core version 6.1.6.Final
2024-07-08 10:36:52,004 [WARN] org.hibernate.orm.deprecation [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-07-08 10:36:52,191 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2024-07-08 10:36:52,488 [INFO] com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3957d88b
2024-07-08 10:36:52,492 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2024-07-08 10:36:52,577 [INFO] SQL dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-07-08 10:36:53,593 [DEBUG] org.hibernate.SQL [main] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 10:36:53,637 [DEBUG] org.hibernate.SQL [main] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 10:36:53,645 [DEBUG] org.hibernate.SQL [main] drop table if exists account
2024-07-08 10:36:53,657 [DEBUG] org.hibernate.SQL [main] drop table if exists account_seq
2024-07-08 10:36:53,666 [DEBUG] org.hibernate.SQL [main] drop table if exists album
2024-07-08 10:36:53,673 [DEBUG] org.hibernate.SQL [main] drop table if exists album_seq
2024-07-08 10:36:53,682 [DEBUG] org.hibernate.SQL [main] drop table if exists photo
2024-07-08 10:36:53,691 [DEBUG] org.hibernate.SQL [main] drop table if exists photo_seq
2024-07-08 10:36:53,703 [DEBUG] org.hibernate.SQL [main] create table account (id bigint not null, authorities varchar(255), email varchar(255), password varchar(255), primary key (id)) engine=InnoDB
2024-07-08 10:36:53,715 [DEBUG] org.hibernate.SQL [main] create table account_seq (next_val bigint) engine=InnoDB
2024-07-08 10:36:53,726 [DEBUG] org.hibernate.SQL [main] insert into account_seq values ( 1 )
2024-07-08 10:36:53,731 [DEBUG] org.hibernate.SQL [main] create table album (id bigint not null, description varchar(255), name varchar(255), account_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 10:36:53,740 [DEBUG] org.hibernate.SQL [main] create table album_seq (next_val bigint) engine=InnoDB
2024-07-08 10:36:53,749 [DEBUG] org.hibernate.SQL [main] insert into album_seq values ( 1 )
2024-07-08 10:36:53,752 [DEBUG] org.hibernate.SQL [main] create table photo (id bigint not null, description varchar(255), file_name varchar(255), name varchar(255), original_file_name varchar(255), album_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 10:36:53,762 [DEBUG] org.hibernate.SQL [main] create table photo_seq (next_val bigint) engine=InnoDB
2024-07-08 10:36:53,771 [DEBUG] org.hibernate.SQL [main] insert into photo_seq values ( 1 )
2024-07-08 10:36:53,774 [DEBUG] org.hibernate.SQL [main] alter table account add constraint UK_q0uja26qgu1atulenwup9rxyr unique (email)
2024-07-08 10:36:53,791 [DEBUG] org.hibernate.SQL [main] alter table album add constraint FK5jtlch5qo4kdolwqbfyrf4e02 foreign key (account_id) references account (id)
2024-07-08 10:36:53,817 [DEBUG] org.hibernate.SQL [main] alter table photo add constraint FKpy64km2p72eoy5rwh31ria0vx foreign key (album_id) references album (id)
2024-07-08 10:36:53,844 [INFO] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-07-08 10:36:53,857 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 10:36:55,492 [WARN] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-08 10:36:55,902 [INFO] org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@779136bf, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@f9ac719, org.springframework.security.web.context.SecurityContextHolderFilter@6fa2d0b2, org.springframework.security.web.header.HeaderWriterFilter@4932d580, org.springframework.security.web.authentication.logout.LogoutFilter@2f025e9e, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@1d982fbe, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@43de88f3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@28551755, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@53a3fc8b, org.springframework.security.web.session.SessionManagementFilter@761a0bbd, org.springframework.security.web.access.ExceptionTranslationFilter@1390a415, org.springframework.security.web.access.intercept.AuthorizationFilter@4df13b7e]
2024-07-08 10:36:56,231 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-07-08 10:36:56,247 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Started SpringRestDemoApplication in 8.163 seconds (process running for 8.997)
2024-07-08 10:36:56,446 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 10:36:56,465 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 10:36:56,516 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 10:36:56,670 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 10:36:56,672 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 10:36:56,676 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 10:37:07,601 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-08 10:37:07,602 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-07-08 10:37:07,604 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Completed initialization in 2 ms
2024-07-08 10:37:09,280 [INFO] org.springdoc.api.AbstractOpenApiResource [http-nio-8080-exec-8] Init duration for springdoc-openapi is: 638 ms
2024-07-08 10:37:24,287 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-1] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 10:37:56,156 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-2] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 10:37:56,162 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-2] select next_val as id_val from album_seq for update
2024-07-08 10:37:56,164 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-2] update album_seq set next_val= ? where next_val=?
2024-07-08 10:37:56,206 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-2] insert into album (account_id, description, name, id) values (?, ?, ?, ?)
2024-07-08 10:39:13,563 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 10:39:13,588 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name from album a1_0 join account a2_0 on a2_0.id=a1_0.account_id where a1_0.id=?
2024-07-08 10:40:34,810 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 10:40:34,813 [INFO] org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl [SpringApplicationShutdownHook] HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2024-07-08 10:40:34,815 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 10:40:34,833 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 10:40:34,845 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account
2024-07-08 10:40:34,859 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account_seq
2024-07-08 10:40:34,876 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album
2024-07-08 10:40:34,891 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album_seq
2024-07-08 10:40:34,899 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo
2024-07-08 10:40:34,908 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo_seq
2024-07-08 10:40:34,922 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-07-08 10:40:34,937 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-07-08 10:40:36,765 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Starting SpringRestDemoApplication using Java 17.0.11 with PID 24613 (/Users/olaidehammed/Downloads/SpringRestDemo/target/classes started by olaidehammed in /Users/olaidehammed/Downloads/SpringRestDemo)
2024-07-08 10:40:36,768 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-07-08 10:40:38,204 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-08 10:40:38,305 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 85 ms. Found 3 JPA repository interfaces.
2024-07-08 10:40:39,226 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-07-08 10:40:39,253 [INFO] org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2024-07-08 10:40:39,254 [INFO] org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.4]
2024-07-08 10:40:39,404 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2024-07-08 10:40:39,404 [INFO] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2554 ms
2024-07-08 10:40:39,634 [INFO] org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-08 10:40:39,730 [INFO] org.hibernate.Version [main] HHH000412: Hibernate ORM core version 6.1.6.Final
2024-07-08 10:40:40,004 [WARN] org.hibernate.orm.deprecation [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-07-08 10:40:40,257 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2024-07-08 10:40:40,588 [INFO] com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2fba0dac
2024-07-08 10:40:40,592 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2024-07-08 10:40:40,670 [INFO] SQL dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-07-08 10:40:41,725 [DEBUG] org.hibernate.SQL [main] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 10:40:41,741 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.album' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 10:40:41,748 [DEBUG] org.hibernate.SQL [main] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 10:40:41,749 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.photo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 10:40:41,753 [DEBUG] org.hibernate.SQL [main] drop table if exists account
2024-07-08 10:40:41,761 [DEBUG] org.hibernate.SQL [main] drop table if exists account_seq
2024-07-08 10:40:41,764 [DEBUG] org.hibernate.SQL [main] drop table if exists album
2024-07-08 10:40:41,768 [DEBUG] org.hibernate.SQL [main] drop table if exists album_seq
2024-07-08 10:40:41,772 [DEBUG] org.hibernate.SQL [main] drop table if exists photo
2024-07-08 10:40:41,775 [DEBUG] org.hibernate.SQL [main] drop table if exists photo_seq
2024-07-08 10:40:41,782 [DEBUG] org.hibernate.SQL [main] create table account (id bigint not null, authorities varchar(255), email varchar(255), password varchar(255), primary key (id)) engine=InnoDB
2024-07-08 10:40:41,799 [DEBUG] org.hibernate.SQL [main] create table account_seq (next_val bigint) engine=InnoDB
2024-07-08 10:40:41,812 [DEBUG] org.hibernate.SQL [main] insert into account_seq values ( 1 )
2024-07-08 10:40:41,815 [DEBUG] org.hibernate.SQL [main] create table album (id bigint not null, description varchar(255), name varchar(255), account_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 10:40:41,827 [DEBUG] org.hibernate.SQL [main] create table album_seq (next_val bigint) engine=InnoDB
2024-07-08 10:40:41,839 [DEBUG] org.hibernate.SQL [main] insert into album_seq values ( 1 )
2024-07-08 10:40:41,843 [DEBUG] org.hibernate.SQL [main] create table photo (id bigint not null, description varchar(255), file_name varchar(255), name varchar(255), original_file_name varchar(255), album_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 10:40:41,854 [DEBUG] org.hibernate.SQL [main] create table photo_seq (next_val bigint) engine=InnoDB
2024-07-08 10:40:41,864 [DEBUG] org.hibernate.SQL [main] insert into photo_seq values ( 1 )
2024-07-08 10:40:41,868 [DEBUG] org.hibernate.SQL [main] alter table account add constraint UK_q0uja26qgu1atulenwup9rxyr unique (email)
2024-07-08 10:40:41,881 [DEBUG] org.hibernate.SQL [main] alter table album add constraint FK5jtlch5qo4kdolwqbfyrf4e02 foreign key (account_id) references account (id)
2024-07-08 10:40:41,913 [DEBUG] org.hibernate.SQL [main] alter table photo add constraint FKpy64km2p72eoy5rwh31ria0vx foreign key (album_id) references album (id)
2024-07-08 10:40:41,942 [INFO] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-07-08 10:40:41,954 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 10:40:43,071 [WARN] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-08 10:40:43,511 [INFO] org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@67167f8f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1e5190bd, org.springframework.security.web.context.SecurityContextHolderFilter@f9ac719, org.springframework.security.web.header.HeaderWriterFilter@12b66c89, org.springframework.security.web.authentication.logout.LogoutFilter@70cdbd18, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@4505015b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@337e573b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1952ad9d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@733345f5, org.springframework.security.web.session.SessionManagementFilter@1d982fbe, org.springframework.security.web.access.ExceptionTranslationFilter@4df13b7e, org.springframework.security.web.access.intercept.AuthorizationFilter@553d828a]
2024-07-08 10:40:43,835 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-07-08 10:40:43,852 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Started SpringRestDemoApplication in 7.707 seconds (process running for 8.431)
2024-07-08 10:40:44,058 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 10:40:44,072 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 10:40:44,112 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 10:40:44,286 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 10:40:44,287 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 10:40:44,290 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 10:41:02,725 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-08 10:41:02,726 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-07-08 10:41:02,729 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Completed initialization in 3 ms
2024-07-08 10:41:03,783 [INFO] org.springdoc.api.AbstractOpenApiResource [http-nio-8080-exec-8] Init duration for springdoc-openapi is: 591 ms
2024-07-08 10:41:17,692 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-9] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 10:42:31,206 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 10:42:31,207 [INFO] org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl [SpringApplicationShutdownHook] HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2024-07-08 10:42:31,208 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 10:42:31,222 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 10:42:31,239 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account
2024-07-08 10:42:31,247 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account_seq
2024-07-08 10:42:31,253 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album
2024-07-08 10:42:31,261 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album_seq
2024-07-08 10:42:31,270 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo
2024-07-08 10:42:31,279 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo_seq
2024-07-08 10:42:31,289 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-07-08 10:42:31,301 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-07-08 10:42:32,858 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Starting SpringRestDemoApplication using Java 17.0.11 with PID 26051 (/Users/olaidehammed/Downloads/SpringRestDemo/target/classes started by olaidehammed in /Users/olaidehammed/Downloads/SpringRestDemo)
2024-07-08 10:42:32,861 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-07-08 10:42:34,275 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-08 10:42:34,387 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 97 ms. Found 3 JPA repository interfaces.
2024-07-08 10:42:35,489 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-07-08 10:42:35,512 [INFO] org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2024-07-08 10:42:35,513 [INFO] org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.4]
2024-07-08 10:42:35,676 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2024-07-08 10:42:35,677 [INFO] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2731 ms
2024-07-08 10:42:35,908 [INFO] org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-08 10:42:35,994 [INFO] org.hibernate.Version [main] HHH000412: Hibernate ORM core version 6.1.6.Final
2024-07-08 10:42:36,239 [WARN] org.hibernate.orm.deprecation [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-07-08 10:42:36,468 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2024-07-08 10:42:36,762 [INFO] com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2fca3eb5
2024-07-08 10:42:36,766 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2024-07-08 10:42:36,855 [INFO] SQL dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-07-08 10:42:37,997 [DEBUG] org.hibernate.SQL [main] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 10:42:38,014 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.album' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 10:42:38,020 [DEBUG] org.hibernate.SQL [main] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 10:42:38,022 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.photo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 10:42:38,028 [DEBUG] org.hibernate.SQL [main] drop table if exists account
2024-07-08 10:42:38,038 [DEBUG] org.hibernate.SQL [main] drop table if exists account_seq
2024-07-08 10:42:38,043 [DEBUG] org.hibernate.SQL [main] drop table if exists album
2024-07-08 10:42:38,049 [DEBUG] org.hibernate.SQL [main] drop table if exists album_seq
2024-07-08 10:42:38,052 [DEBUG] org.hibernate.SQL [main] drop table if exists photo
2024-07-08 10:42:38,058 [DEBUG] org.hibernate.SQL [main] drop table if exists photo_seq
2024-07-08 10:42:38,067 [DEBUG] org.hibernate.SQL [main] create table account (id bigint not null, authorities varchar(255), email varchar(255), password varchar(255), primary key (id)) engine=InnoDB
2024-07-08 10:42:38,081 [DEBUG] org.hibernate.SQL [main] create table account_seq (next_val bigint) engine=InnoDB
2024-07-08 10:42:38,093 [DEBUG] org.hibernate.SQL [main] insert into account_seq values ( 1 )
2024-07-08 10:42:38,098 [DEBUG] org.hibernate.SQL [main] create table album (id bigint not null, description varchar(255), name varchar(255), account_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 10:42:38,114 [DEBUG] org.hibernate.SQL [main] create table album_seq (next_val bigint) engine=InnoDB
2024-07-08 10:42:38,128 [DEBUG] org.hibernate.SQL [main] insert into album_seq values ( 1 )
2024-07-08 10:42:38,133 [DEBUG] org.hibernate.SQL [main] create table photo (id bigint not null, description varchar(255), file_name varchar(255), name varchar(255), original_file_name varchar(255), album_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 10:42:38,150 [DEBUG] org.hibernate.SQL [main] create table photo_seq (next_val bigint) engine=InnoDB
2024-07-08 10:42:38,160 [DEBUG] org.hibernate.SQL [main] insert into photo_seq values ( 1 )
2024-07-08 10:42:38,163 [DEBUG] org.hibernate.SQL [main] alter table account add constraint UK_q0uja26qgu1atulenwup9rxyr unique (email)
2024-07-08 10:42:38,172 [DEBUG] org.hibernate.SQL [main] alter table album add constraint FK5jtlch5qo4kdolwqbfyrf4e02 foreign key (account_id) references account (id)
2024-07-08 10:42:38,200 [DEBUG] org.hibernate.SQL [main] alter table photo add constraint FKpy64km2p72eoy5rwh31ria0vx foreign key (album_id) references album (id)
2024-07-08 10:42:38,231 [INFO] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-07-08 10:42:38,245 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 10:42:40,445 [WARN] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-08 10:42:41,140 [INFO] org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6464f017, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@755a90a6, org.springframework.security.web.context.SecurityContextHolderFilter@79d3c655, org.springframework.security.web.header.HeaderWriterFilter@1d884a19, org.springframework.security.web.authentication.logout.LogoutFilter@4505015b, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@25511895, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5837cb9e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6705fb02, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5862ab28, org.springframework.security.web.session.SessionManagementFilter@6b7a0f18, org.springframework.security.web.access.ExceptionTranslationFilter@1952ad9d, org.springframework.security.web.access.intercept.AuthorizationFilter@44a0e68f]
2024-07-08 10:42:41,655 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-07-08 10:42:41,678 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Started SpringRestDemoApplication in 9.407 seconds (process running for 9.895)
2024-07-08 10:42:41,898 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 10:42:41,913 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 10:42:41,961 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 10:42:42,151 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 10:42:42,153 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 10:42:42,159 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 10:43:18,781 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-08 10:43:18,782 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-07-08 10:43:18,783 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-07-08 10:43:19,764 [INFO] org.springdoc.api.AbstractOpenApiResource [http-nio-8080-exec-8] Init duration for springdoc-openapi is: 574 ms
2024-07-08 10:43:33,895 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-9] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 10:44:10,508 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 10:44:10,515 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select next_val as id_val from album_seq for update
2024-07-08 10:44:10,516 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] update album_seq set next_val= ? where next_val=?
2024-07-08 10:44:10,524 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] insert into album (account_id, description, name, id) values (?, ?, ?, ?)
2024-07-08 10:44:19,445 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 10:44:19,460 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] select a1_0.id,a1_0.account_id,a1_0.description,a1_0.name from album a1_0 where a1_0.account_id=?
2024-07-08 10:45:36,422 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-7] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 10:45:36,441 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-7] select a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name from album a1_0 join account a2_0 on a2_0.id=a1_0.account_id where a1_0.id=?
2024-07-08 10:49:53,491 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-9] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 10:49:53,498 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-9] select a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name from album a1_0 join account a2_0 on a2_0.id=a1_0.account_id where a1_0.id=?
2024-07-08 10:50:37,276 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 10:50:37,278 [INFO] org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl [SpringApplicationShutdownHook] HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2024-07-08 10:50:37,279 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 10:50:37,313 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 10:50:37,327 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account
2024-07-08 10:50:37,346 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account_seq
2024-07-08 10:50:37,355 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album
2024-07-08 10:50:37,363 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album_seq
2024-07-08 10:50:37,374 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo
2024-07-08 10:50:37,406 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo_seq
2024-07-08 10:50:37,417 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-07-08 10:50:37,431 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-07-08 10:50:39,037 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Starting SpringRestDemoApplication using Java 17.0.11 with PID 31717 (/Users/olaidehammed/Downloads/SpringRestDemo/target/classes started by olaidehammed in /Users/olaidehammed/Downloads/SpringRestDemo)
2024-07-08 10:50:39,039 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-07-08 10:50:40,290 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-08 10:50:40,422 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 118 ms. Found 3 JPA repository interfaces.
2024-07-08 10:50:41,394 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-07-08 10:50:41,411 [INFO] org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2024-07-08 10:50:41,412 [INFO] org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.4]
2024-07-08 10:50:41,540 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2024-07-08 10:50:41,541 [INFO] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2421 ms
2024-07-08 10:50:41,752 [INFO] org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-08 10:50:41,829 [INFO] org.hibernate.Version [main] HHH000412: Hibernate ORM core version 6.1.6.Final
2024-07-08 10:50:42,052 [WARN] org.hibernate.orm.deprecation [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-07-08 10:50:42,215 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2024-07-08 10:50:42,442 [INFO] com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5ce3409b
2024-07-08 10:50:42,445 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2024-07-08 10:50:42,508 [INFO] SQL dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-07-08 10:50:43,565 [DEBUG] org.hibernate.SQL [main] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 10:50:43,578 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.album' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 10:50:43,582 [DEBUG] org.hibernate.SQL [main] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 10:50:43,585 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.photo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 10:50:43,587 [DEBUG] org.hibernate.SQL [main] drop table if exists account
2024-07-08 10:50:43,596 [DEBUG] org.hibernate.SQL [main] drop table if exists account_seq
2024-07-08 10:50:43,599 [DEBUG] org.hibernate.SQL [main] drop table if exists album
2024-07-08 10:50:43,603 [DEBUG] org.hibernate.SQL [main] drop table if exists album_seq
2024-07-08 10:50:43,606 [DEBUG] org.hibernate.SQL [main] drop table if exists photo
2024-07-08 10:50:43,610 [DEBUG] org.hibernate.SQL [main] drop table if exists photo_seq
2024-07-08 10:50:43,618 [DEBUG] org.hibernate.SQL [main] create table account (id bigint not null, authorities varchar(255), email varchar(255), password varchar(255), primary key (id)) engine=InnoDB
2024-07-08 10:50:43,629 [DEBUG] org.hibernate.SQL [main] create table account_seq (next_val bigint) engine=InnoDB
2024-07-08 10:50:43,638 [DEBUG] org.hibernate.SQL [main] insert into account_seq values ( 1 )
2024-07-08 10:50:43,643 [DEBUG] org.hibernate.SQL [main] create table album (id bigint not null, description varchar(255), name varchar(255), account_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 10:50:43,653 [DEBUG] org.hibernate.SQL [main] create table album_seq (next_val bigint) engine=InnoDB
2024-07-08 10:50:43,665 [DEBUG] org.hibernate.SQL [main] insert into album_seq values ( 1 )
2024-07-08 10:50:43,669 [DEBUG] org.hibernate.SQL [main] create table photo (id bigint not null, description varchar(255), file_name varchar(255), name varchar(255), original_file_name varchar(255), album_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 10:50:43,681 [DEBUG] org.hibernate.SQL [main] create table photo_seq (next_val bigint) engine=InnoDB
2024-07-08 10:50:43,690 [DEBUG] org.hibernate.SQL [main] insert into photo_seq values ( 1 )
2024-07-08 10:50:43,694 [DEBUG] org.hibernate.SQL [main] alter table account add constraint UK_q0uja26qgu1atulenwup9rxyr unique (email)
2024-07-08 10:50:43,703 [DEBUG] org.hibernate.SQL [main] alter table album add constraint FK5jtlch5qo4kdolwqbfyrf4e02 foreign key (account_id) references account (id)
2024-07-08 10:50:43,728 [DEBUG] org.hibernate.SQL [main] alter table photo add constraint FKpy64km2p72eoy5rwh31ria0vx foreign key (album_id) references album (id)
2024-07-08 10:50:43,755 [INFO] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-07-08 10:50:43,766 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 10:50:44,920 [WARN] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-08 10:50:45,393 [INFO] org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@103033fe, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@25511895, org.springframework.security.web.context.SecurityContextHolderFilter@6b7a0f18, org.springframework.security.web.header.HeaderWriterFilter@58d4fe33, org.springframework.security.web.authentication.logout.LogoutFilter@6cac0334, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@67683210, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@914ab92, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@74d3b331, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@38f569d, org.springframework.security.web.session.SessionManagementFilter@6e53bb4f, org.springframework.security.web.access.ExceptionTranslationFilter@4d24ab25, org.springframework.security.web.access.intercept.AuthorizationFilter@e638553]
2024-07-08 10:50:45,928 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-07-08 10:50:45,947 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Started SpringRestDemoApplication in 7.535 seconds (process running for 8.099)
2024-07-08 10:50:46,124 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 10:50:46,137 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 10:50:46,180 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 10:50:46,319 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 10:50:46,320 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 10:50:46,324 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 10:52:37,070 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 10:52:37,071 [INFO] org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl [SpringApplicationShutdownHook] HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2024-07-08 10:52:37,072 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 10:52:37,084 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 10:52:37,093 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account
2024-07-08 10:52:37,102 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account_seq
2024-07-08 10:52:37,109 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album
2024-07-08 10:52:37,115 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album_seq
2024-07-08 10:52:37,123 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo
2024-07-08 10:52:37,137 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo_seq
2024-07-08 10:52:37,149 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-07-08 10:52:37,158 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-07-08 10:52:38,619 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Starting SpringRestDemoApplication using Java 17.0.11 with PID 33074 (/Users/olaidehammed/Downloads/SpringRestDemo/target/classes started by olaidehammed in /Users/olaidehammed/Downloads/SpringRestDemo)
2024-07-08 10:52:38,622 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-07-08 10:52:39,828 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-08 10:52:39,911 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 73 ms. Found 3 JPA repository interfaces.
2024-07-08 10:52:41,004 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-07-08 10:52:41,021 [INFO] org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2024-07-08 10:52:41,022 [INFO] org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.4]
2024-07-08 10:52:41,187 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2024-07-08 10:52:41,188 [INFO] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2477 ms
2024-07-08 10:52:41,450 [INFO] org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-08 10:52:41,532 [INFO] org.hibernate.Version [main] HHH000412: Hibernate ORM core version 6.1.6.Final
2024-07-08 10:52:41,805 [WARN] org.hibernate.orm.deprecation [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-07-08 10:52:41,980 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2024-07-08 10:52:42,244 [INFO] com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6d7740f0
2024-07-08 10:52:42,248 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2024-07-08 10:52:42,334 [INFO] SQL dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-07-08 10:52:43,587 [DEBUG] org.hibernate.SQL [main] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 10:52:43,603 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.album' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 10:52:43,610 [DEBUG] org.hibernate.SQL [main] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 10:52:43,613 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.photo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 10:52:43,617 [DEBUG] org.hibernate.SQL [main] drop table if exists account
2024-07-08 10:52:43,627 [DEBUG] org.hibernate.SQL [main] drop table if exists account_seq
2024-07-08 10:52:43,633 [DEBUG] org.hibernate.SQL [main] drop table if exists album
2024-07-08 10:52:43,640 [DEBUG] org.hibernate.SQL [main] drop table if exists album_seq
2024-07-08 10:52:43,648 [DEBUG] org.hibernate.SQL [main] drop table if exists photo
2024-07-08 10:52:43,696 [DEBUG] org.hibernate.SQL [main] drop table if exists photo_seq
2024-07-08 10:52:43,709 [DEBUG] org.hibernate.SQL [main] create table account (id bigint not null, authorities varchar(255), email varchar(255), password varchar(255), primary key (id)) engine=InnoDB
2024-07-08 10:52:43,725 [DEBUG] org.hibernate.SQL [main] create table account_seq (next_val bigint) engine=InnoDB
2024-07-08 10:52:43,741 [DEBUG] org.hibernate.SQL [main] insert into account_seq values ( 1 )
2024-07-08 10:52:43,745 [DEBUG] org.hibernate.SQL [main] create table album (id bigint not null, description varchar(255), name varchar(255), account_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 10:52:43,757 [DEBUG] org.hibernate.SQL [main] create table album_seq (next_val bigint) engine=InnoDB
2024-07-08 10:52:43,767 [DEBUG] org.hibernate.SQL [main] insert into album_seq values ( 1 )
2024-07-08 10:52:43,771 [DEBUG] org.hibernate.SQL [main] create table photo (id bigint not null, description varchar(255), file_name varchar(255), name varchar(255), original_file_name varchar(255), album_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 10:52:43,782 [DEBUG] org.hibernate.SQL [main] create table photo_seq (next_val bigint) engine=InnoDB
2024-07-08 10:52:43,790 [DEBUG] org.hibernate.SQL [main] insert into photo_seq values ( 1 )
2024-07-08 10:52:43,793 [DEBUG] org.hibernate.SQL [main] alter table account add constraint UK_q0uja26qgu1atulenwup9rxyr unique (email)
2024-07-08 10:52:43,805 [DEBUG] org.hibernate.SQL [main] alter table album add constraint FK5jtlch5qo4kdolwqbfyrf4e02 foreign key (account_id) references account (id)
2024-07-08 10:52:43,830 [DEBUG] org.hibernate.SQL [main] alter table photo add constraint FKpy64km2p72eoy5rwh31ria0vx foreign key (album_id) references album (id)
2024-07-08 10:52:43,862 [INFO] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-07-08 10:52:43,874 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 10:52:46,177 [WARN] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-08 10:52:46,697 [INFO] org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5add7380, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@e638553, org.springframework.security.web.context.SecurityContextHolderFilter@4d24ab25, org.springframework.security.web.header.HeaderWriterFilter@3ccc4ca0, org.springframework.security.web.authentication.logout.LogoutFilter@5dd12c19, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@1e5190bd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@58d4fe33, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@62d21afd, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1c25385a, org.springframework.security.web.session.SessionManagementFilter@f9ac719, org.springframework.security.web.access.ExceptionTranslationFilter@5408fca1, org.springframework.security.web.access.intercept.AuthorizationFilter@5f233f9]
2024-07-08 10:52:47,078 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-07-08 10:52:47,098 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Started SpringRestDemoApplication in 9.065 seconds (process running for 9.446)
2024-07-08 10:52:47,267 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 10:52:47,281 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 10:52:47,338 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 10:52:47,722 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 10:52:47,725 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 10:52:47,730 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 10:53:01,446 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-08 10:53:01,447 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-07-08 10:53:01,449 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-07-08 10:53:02,450 [INFO] org.springdoc.api.AbstractOpenApiResource [http-nio-8080-exec-8] Init duration for springdoc-openapi is: 711 ms
2024-07-08 10:53:16,391 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-9] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 10:53:53,762 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 10:53:53,767 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select next_val as id_val from album_seq for update
2024-07-08 10:53:53,769 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] update album_seq set next_val= ? where next_val=?
2024-07-08 10:53:53,774 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] insert into album (account_id, description, name, id) values (?, ?, ?, ?)
2024-07-08 10:54:22,606 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 10:54:22,624 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] select a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name from album a1_0 join account a2_0 on a2_0.id=a1_0.account_id where a1_0.id=?
2024-07-08 10:55:14,566 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 10:55:14,567 [INFO] org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl [SpringApplicationShutdownHook] HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2024-07-08 10:55:14,568 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 10:55:14,582 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 10:55:14,593 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account
2024-07-08 10:55:14,601 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account_seq
2024-07-08 10:55:14,608 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album
2024-07-08 10:55:14,615 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album_seq
2024-07-08 10:55:14,622 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo
2024-07-08 10:55:14,631 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo_seq
2024-07-08 10:55:14,639 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-07-08 10:55:14,650 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-07-08 10:55:16,237 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Starting SpringRestDemoApplication using Java 17.0.11 with PID 34912 (/Users/olaidehammed/Downloads/SpringRestDemo/target/classes started by olaidehammed in /Users/olaidehammed/Downloads/SpringRestDemo)
2024-07-08 10:55:16,239 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-07-08 10:55:17,415 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-08 10:55:17,520 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 92 ms. Found 3 JPA repository interfaces.
2024-07-08 10:55:18,543 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-07-08 10:55:18,558 [INFO] org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2024-07-08 10:55:18,559 [INFO] org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.4]
2024-07-08 10:55:18,697 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2024-07-08 10:55:18,698 [INFO] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2378 ms
2024-07-08 10:55:18,962 [INFO] org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-08 10:55:19,049 [INFO] org.hibernate.Version [main] HHH000412: Hibernate ORM core version 6.1.6.Final
2024-07-08 10:55:19,313 [WARN] org.hibernate.orm.deprecation [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-07-08 10:55:19,465 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2024-07-08 10:55:19,709 [INFO] com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@63db743d
2024-07-08 10:55:19,711 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2024-07-08 10:55:19,779 [INFO] SQL dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-07-08 10:55:21,077 [DEBUG] org.hibernate.SQL [main] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 10:55:21,090 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.album' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 10:55:21,094 [DEBUG] org.hibernate.SQL [main] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 10:55:21,097 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.photo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 10:55:21,098 [DEBUG] org.hibernate.SQL [main] drop table if exists account
2024-07-08 10:55:21,108 [DEBUG] org.hibernate.SQL [main] drop table if exists account_seq
2024-07-08 10:55:21,110 [DEBUG] org.hibernate.SQL [main] drop table if exists album
2024-07-08 10:55:21,114 [DEBUG] org.hibernate.SQL [main] drop table if exists album_seq
2024-07-08 10:55:21,117 [DEBUG] org.hibernate.SQL [main] drop table if exists photo
2024-07-08 10:55:21,121 [DEBUG] org.hibernate.SQL [main] drop table if exists photo_seq
2024-07-08 10:55:21,128 [DEBUG] org.hibernate.SQL [main] create table account (id bigint not null, authorities varchar(255), email varchar(255), password varchar(255), primary key (id)) engine=InnoDB
2024-07-08 10:55:21,140 [DEBUG] org.hibernate.SQL [main] create table account_seq (next_val bigint) engine=InnoDB
2024-07-08 10:55:21,154 [DEBUG] org.hibernate.SQL [main] insert into account_seq values ( 1 )
2024-07-08 10:55:21,158 [DEBUG] org.hibernate.SQL [main] create table album (id bigint not null, description varchar(255), name varchar(255), account_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 10:55:21,204 [DEBUG] org.hibernate.SQL [main] create table album_seq (next_val bigint) engine=InnoDB
2024-07-08 10:55:21,214 [DEBUG] org.hibernate.SQL [main] insert into album_seq values ( 1 )
2024-07-08 10:55:21,219 [DEBUG] org.hibernate.SQL [main] create table photo (id bigint not null, description varchar(255), file_name varchar(255), name varchar(255), original_file_name varchar(255), album_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 10:55:21,230 [DEBUG] org.hibernate.SQL [main] create table photo_seq (next_val bigint) engine=InnoDB
2024-07-08 10:55:21,241 [DEBUG] org.hibernate.SQL [main] insert into photo_seq values ( 1 )
2024-07-08 10:55:21,244 [DEBUG] org.hibernate.SQL [main] alter table account add constraint UK_q0uja26qgu1atulenwup9rxyr unique (email)
2024-07-08 10:55:21,257 [DEBUG] org.hibernate.SQL [main] alter table album add constraint FK5jtlch5qo4kdolwqbfyrf4e02 foreign key (account_id) references account (id)
2024-07-08 10:55:21,285 [DEBUG] org.hibernate.SQL [main] alter table photo add constraint FKpy64km2p72eoy5rwh31ria0vx foreign key (album_id) references album (id)
2024-07-08 10:55:21,320 [INFO] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-07-08 10:55:21,330 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 10:55:22,425 [WARN] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-08 10:55:22,767 [INFO] org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@63a9af28, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@105cdf61, org.springframework.security.web.context.SecurityContextHolderFilter@62d21afd, org.springframework.security.web.header.HeaderWriterFilter@13868c41, org.springframework.security.web.authentication.logout.LogoutFilter@553d828a, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@44a0e68f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@256c6f7a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@232be28d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@530bd77b, org.springframework.security.web.session.SessionManagementFilter@1952ad9d, org.springframework.security.web.access.ExceptionTranslationFilter@70ccb3bf, org.springframework.security.web.access.intercept.AuthorizationFilter@34376069]
2024-07-08 10:55:23,045 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-07-08 10:55:23,059 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Started SpringRestDemoApplication in 7.357 seconds (process running for 7.924)
2024-07-08 10:55:23,238 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 10:55:23,249 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 10:55:23,277 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 10:55:23,436 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 10:55:23,438 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 10:55:23,441 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 10:55:36,474 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-08 10:55:36,474 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-07-08 10:55:36,476 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Completed initialization in 2 ms
2024-07-08 10:55:37,594 [INFO] org.springdoc.api.AbstractOpenApiResource [http-nio-8080-exec-8] Init duration for springdoc-openapi is: 685 ms
2024-07-08 10:55:49,432 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-9] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 10:56:16,838 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 10:56:16,846 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select next_val as id_val from album_seq for update
2024-07-08 10:56:16,848 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] update album_seq set next_val= ? where next_val=?
2024-07-08 10:56:16,852 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] insert into album (account_id, description, name, id) values (?, ?, ?, ?)
2024-07-08 10:56:26,963 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-1] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 10:56:26,978 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-1] select a1_0.id,a1_0.account_id,a1_0.description,a1_0.name from album a1_0 where a1_0.account_id=?
2024-07-08 10:57:01,718 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 10:57:01,735 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name from album a1_0 join account a2_0 on a2_0.id=a1_0.account_id where a1_0.id=?
2024-07-08 10:58:22,991 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 10:58:22,992 [INFO] org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl [SpringApplicationShutdownHook] HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2024-07-08 10:58:22,993 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 10:58:23,007 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 10:58:23,016 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account
2024-07-08 10:58:23,025 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account_seq
2024-07-08 10:58:23,033 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album
2024-07-08 10:58:23,043 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album_seq
2024-07-08 10:58:23,052 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo
2024-07-08 10:58:23,059 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo_seq
2024-07-08 10:58:23,070 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-07-08 10:58:23,080 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-07-08 10:58:24,625 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Starting SpringRestDemoApplication using Java 17.0.11 with PID 37112 (/Users/olaidehammed/Downloads/SpringRestDemo/target/classes started by olaidehammed in /Users/olaidehammed/Downloads/SpringRestDemo)
2024-07-08 10:58:24,628 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-07-08 10:58:26,225 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-08 10:58:26,339 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 101 ms. Found 3 JPA repository interfaces.
2024-07-08 10:58:27,246 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-07-08 10:58:27,264 [INFO] org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2024-07-08 10:58:27,265 [INFO] org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.4]
2024-07-08 10:58:27,394 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2024-07-08 10:58:27,395 [INFO] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2663 ms
2024-07-08 10:58:27,606 [INFO] org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-08 10:58:27,672 [INFO] org.hibernate.Version [main] HHH000412: Hibernate ORM core version 6.1.6.Final
2024-07-08 10:58:27,858 [WARN] org.hibernate.orm.deprecation [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-07-08 10:58:27,998 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2024-07-08 10:58:28,195 [INFO] com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1d283d1
2024-07-08 10:58:28,197 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2024-07-08 10:58:28,253 [INFO] SQL dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-07-08 10:58:29,126 [DEBUG] org.hibernate.SQL [main] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 10:58:29,141 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.album' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 10:58:29,147 [DEBUG] org.hibernate.SQL [main] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 10:58:29,150 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.photo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 10:58:29,152 [DEBUG] org.hibernate.SQL [main] drop table if exists account
2024-07-08 10:58:29,161 [DEBUG] org.hibernate.SQL [main] drop table if exists account_seq
2024-07-08 10:58:29,165 [DEBUG] org.hibernate.SQL [main] drop table if exists album
2024-07-08 10:58:29,168 [DEBUG] org.hibernate.SQL [main] drop table if exists album_seq
2024-07-08 10:58:29,171 [DEBUG] org.hibernate.SQL [main] drop table if exists photo
2024-07-08 10:58:29,174 [DEBUG] org.hibernate.SQL [main] drop table if exists photo_seq
2024-07-08 10:58:29,181 [DEBUG] org.hibernate.SQL [main] create table account (id bigint not null, authorities varchar(255), email varchar(255), password varchar(255), primary key (id)) engine=InnoDB
2024-07-08 10:58:29,192 [DEBUG] org.hibernate.SQL [main] create table account_seq (next_val bigint) engine=InnoDB
2024-07-08 10:58:29,202 [DEBUG] org.hibernate.SQL [main] insert into account_seq values ( 1 )
2024-07-08 10:58:29,205 [DEBUG] org.hibernate.SQL [main] create table album (id bigint not null, description varchar(255), name varchar(255), account_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 10:58:29,216 [DEBUG] org.hibernate.SQL [main] create table album_seq (next_val bigint) engine=InnoDB
2024-07-08 10:58:29,225 [DEBUG] org.hibernate.SQL [main] insert into album_seq values ( 1 )
2024-07-08 10:58:29,229 [DEBUG] org.hibernate.SQL [main] create table photo (id bigint not null, description varchar(255), file_name varchar(255), name varchar(255), original_file_name varchar(255), album_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 10:58:29,244 [DEBUG] org.hibernate.SQL [main] create table photo_seq (next_val bigint) engine=InnoDB
2024-07-08 10:58:29,252 [DEBUG] org.hibernate.SQL [main] insert into photo_seq values ( 1 )
2024-07-08 10:58:29,255 [DEBUG] org.hibernate.SQL [main] alter table account add constraint UK_q0uja26qgu1atulenwup9rxyr unique (email)
2024-07-08 10:58:29,265 [DEBUG] org.hibernate.SQL [main] alter table album add constraint FK5jtlch5qo4kdolwqbfyrf4e02 foreign key (account_id) references account (id)
2024-07-08 10:58:29,286 [DEBUG] org.hibernate.SQL [main] alter table photo add constraint FKpy64km2p72eoy5rwh31ria0vx foreign key (album_id) references album (id)
2024-07-08 10:58:29,310 [INFO] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-07-08 10:58:29,319 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 10:58:30,295 [WARN] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-08 10:58:30,799 [INFO] org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@329aa2d1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@103033fe, org.springframework.security.web.context.SecurityContextHolderFilter@256aabbe, org.springframework.security.web.header.HeaderWriterFilter@145f1f97, org.springframework.security.web.authentication.logout.LogoutFilter@9c40f43, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@52bcfd10, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@188058fb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5837cb9e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@25511895, org.springframework.security.web.session.SessionManagementFilter@69c6e5, org.springframework.security.web.access.ExceptionTranslationFilter@337e573b, org.springframework.security.web.access.intercept.AuthorizationFilter@5add7380]
2024-07-08 10:58:31,162 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-07-08 10:58:31,178 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Started SpringRestDemoApplication in 7.141 seconds (process running for 7.623)
2024-07-08 10:58:31,361 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 10:58:31,372 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 10:58:31,403 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 10:58:31,540 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 10:58:31,541 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 10:58:31,545 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 10:58:36,068 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 10:58:36,069 [INFO] org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl [SpringApplicationShutdownHook] HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2024-07-08 10:58:36,070 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 10:58:36,094 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 10:58:36,115 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account
2024-07-08 10:58:36,128 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account_seq
2024-07-08 10:58:36,136 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album
2024-07-08 10:58:36,145 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album_seq
2024-07-08 10:58:36,152 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo
2024-07-08 10:58:36,161 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo_seq
2024-07-08 10:58:36,172 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-07-08 10:58:36,182 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-07-08 10:58:37,571 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Starting SpringRestDemoApplication using Java 17.0.11 with PID 37337 (/Users/olaidehammed/Downloads/SpringRestDemo/target/classes started by olaidehammed in /Users/olaidehammed/Downloads/SpringRestDemo)
2024-07-08 10:58:37,573 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-07-08 10:58:38,849 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-08 10:58:38,988 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 108 ms. Found 3 JPA repository interfaces.
2024-07-08 10:58:40,004 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-07-08 10:58:40,019 [INFO] org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2024-07-08 10:58:40,020 [INFO] org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.4]
2024-07-08 10:58:40,136 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2024-07-08 10:58:40,137 [INFO] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2478 ms
2024-07-08 10:58:40,314 [INFO] org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-08 10:58:40,366 [INFO] org.hibernate.Version [main] HHH000412: Hibernate ORM core version 6.1.6.Final
2024-07-08 10:58:40,594 [WARN] org.hibernate.orm.deprecation [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-07-08 10:58:40,825 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2024-07-08 10:58:41,069 [INFO] com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1152900
2024-07-08 10:58:41,071 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2024-07-08 10:58:41,124 [INFO] SQL dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-07-08 10:58:41,934 [DEBUG] org.hibernate.SQL [main] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 10:58:41,995 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.album' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 10:58:42,010 [DEBUG] org.hibernate.SQL [main] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 10:58:42,012 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.photo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 10:58:42,014 [DEBUG] org.hibernate.SQL [main] drop table if exists account
2024-07-08 10:58:42,024 [DEBUG] org.hibernate.SQL [main] drop table if exists account_seq
2024-07-08 10:58:42,028 [DEBUG] org.hibernate.SQL [main] drop table if exists album
2024-07-08 10:58:42,030 [DEBUG] org.hibernate.SQL [main] drop table if exists album_seq
2024-07-08 10:58:42,034 [DEBUG] org.hibernate.SQL [main] drop table if exists photo
2024-07-08 10:58:42,038 [DEBUG] org.hibernate.SQL [main] drop table if exists photo_seq
2024-07-08 10:58:42,045 [DEBUG] org.hibernate.SQL [main] create table account (id bigint not null, authorities varchar(255), email varchar(255), password varchar(255), primary key (id)) engine=InnoDB
2024-07-08 10:58:42,057 [DEBUG] org.hibernate.SQL [main] create table account_seq (next_val bigint) engine=InnoDB
2024-07-08 10:58:42,065 [DEBUG] org.hibernate.SQL [main] insert into account_seq values ( 1 )
2024-07-08 10:58:42,069 [DEBUG] org.hibernate.SQL [main] create table album (id bigint not null, description varchar(255), name varchar(255), account_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 10:58:42,078 [DEBUG] org.hibernate.SQL [main] create table album_seq (next_val bigint) engine=InnoDB
2024-07-08 10:58:42,088 [DEBUG] org.hibernate.SQL [main] insert into album_seq values ( 1 )
2024-07-08 10:58:42,091 [DEBUG] org.hibernate.SQL [main] create table photo (id bigint not null, description varchar(255), file_name varchar(255), name varchar(255), original_file_name varchar(255), album_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 10:58:42,102 [DEBUG] org.hibernate.SQL [main] create table photo_seq (next_val bigint) engine=InnoDB
2024-07-08 10:58:42,110 [DEBUG] org.hibernate.SQL [main] insert into photo_seq values ( 1 )
2024-07-08 10:58:42,114 [DEBUG] org.hibernate.SQL [main] alter table account add constraint UK_q0uja26qgu1atulenwup9rxyr unique (email)
2024-07-08 10:58:42,125 [DEBUG] org.hibernate.SQL [main] alter table album add constraint FK5jtlch5qo4kdolwqbfyrf4e02 foreign key (account_id) references account (id)
2024-07-08 10:58:42,148 [DEBUG] org.hibernate.SQL [main] alter table photo add constraint FKpy64km2p72eoy5rwh31ria0vx foreign key (album_id) references album (id)
2024-07-08 10:58:42,178 [INFO] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-07-08 10:58:42,187 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 10:58:43,203 [WARN] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-08 10:58:43,596 [INFO] org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7657d29f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6ace3, org.springframework.security.web.context.SecurityContextHolderFilter@81cd90e, org.springframework.security.web.header.HeaderWriterFilter@3adb4cc8, org.springframework.security.web.authentication.logout.LogoutFilter@3c62c81f, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@530bd77b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@232be28d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@256aabbe, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@d3b0397, org.springframework.security.web.session.SessionManagementFilter@6ee07d7f, org.springframework.security.web.access.ExceptionTranslationFilter@72115c48, org.springframework.security.web.access.intercept.AuthorizationFilter@6c92a59d]
2024-07-08 10:58:43,937 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-07-08 10:58:43,955 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Started SpringRestDemoApplication in 6.892 seconds (process running for 7.323)
2024-07-08 10:58:44,166 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 10:58:44,179 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 10:58:44,214 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 10:58:44,349 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 10:58:44,350 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 10:58:44,355 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 10:58:55,386 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-08 10:58:55,387 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-07-08 10:58:55,390 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Completed initialization in 3 ms
2024-07-08 10:58:56,493 [INFO] org.springdoc.api.AbstractOpenApiResource [http-nio-8080-exec-8] Init duration for springdoc-openapi is: 740 ms
2024-07-08 10:59:10,051 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-9] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 10:59:47,000 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 10:59:47,005 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select next_val as id_val from album_seq for update
2024-07-08 10:59:47,006 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] update album_seq set next_val= ? where next_val=?
2024-07-08 10:59:47,012 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] insert into album (account_id, description, name, id) values (?, ?, ?, ?)
2024-07-08 10:59:56,294 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 10:59:56,305 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] select a1_0.id,a1_0.account_id,a1_0.description,a1_0.name from album a1_0 where a1_0.account_id=?
2024-07-08 11:00:16,787 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 11:00:16,804 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name from album a1_0 join account a2_0 on a2_0.id=a1_0.account_id where a1_0.id=?
2024-07-08 11:05:30,937 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m19s758ms).
2024-07-08 11:08:28,076 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 11:08:28,078 [INFO] org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl [SpringApplicationShutdownHook] HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2024-07-08 11:08:28,079 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 11:08:28,109 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 11:08:28,124 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account
2024-07-08 11:08:28,134 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account_seq
2024-07-08 11:08:28,142 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album
2024-07-08 11:08:28,151 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album_seq
2024-07-08 11:08:28,157 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo
2024-07-08 11:08:28,167 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo_seq
2024-07-08 11:08:28,176 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-07-08 11:08:28,190 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-07-08 11:08:29,927 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Starting SpringRestDemoApplication using Java 17.0.11 with PID 41636 (/Users/olaidehammed/Downloads/SpringRestDemo/target/classes started by olaidehammed in /Users/olaidehammed/Downloads/SpringRestDemo)
2024-07-08 11:08:29,930 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-07-08 11:08:31,373 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-08 11:08:31,480 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 93 ms. Found 3 JPA repository interfaces.
2024-07-08 11:08:32,436 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-07-08 11:08:32,457 [INFO] org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2024-07-08 11:08:32,458 [INFO] org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.4]
2024-07-08 11:08:32,598 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2024-07-08 11:08:32,598 [INFO] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2591 ms
2024-07-08 11:08:32,879 [INFO] org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-08 11:08:33,021 [INFO] org.hibernate.Version [main] HHH000412: Hibernate ORM core version 6.1.6.Final
2024-07-08 11:08:33,323 [WARN] org.hibernate.orm.deprecation [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-07-08 11:08:33,525 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2024-07-08 11:08:33,792 [INFO] com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1d283d1
2024-07-08 11:08:33,795 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2024-07-08 11:08:33,864 [INFO] SQL dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-07-08 11:08:34,953 [DEBUG] org.hibernate.SQL [main] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 11:08:34,972 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.album' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 11:08:34,979 [DEBUG] org.hibernate.SQL [main] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 11:08:34,981 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.photo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 11:08:34,983 [DEBUG] org.hibernate.SQL [main] drop table if exists account
2024-07-08 11:08:34,995 [DEBUG] org.hibernate.SQL [main] drop table if exists account_seq
2024-07-08 11:08:34,999 [DEBUG] org.hibernate.SQL [main] drop table if exists album
2024-07-08 11:08:35,003 [DEBUG] org.hibernate.SQL [main] drop table if exists album_seq
2024-07-08 11:08:35,008 [DEBUG] org.hibernate.SQL [main] drop table if exists photo
2024-07-08 11:08:35,012 [DEBUG] org.hibernate.SQL [main] drop table if exists photo_seq
2024-07-08 11:08:35,019 [DEBUG] org.hibernate.SQL [main] create table account (id bigint not null, authorities varchar(255), email varchar(255), password varchar(255), primary key (id)) engine=InnoDB
2024-07-08 11:08:35,032 [DEBUG] org.hibernate.SQL [main] create table account_seq (next_val bigint) engine=InnoDB
2024-07-08 11:08:35,071 [DEBUG] org.hibernate.SQL [main] insert into account_seq values ( 1 )
2024-07-08 11:08:35,077 [DEBUG] org.hibernate.SQL [main] create table album (id bigint not null, description varchar(255), name varchar(255), account_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 11:08:35,089 [DEBUG] org.hibernate.SQL [main] create table album_seq (next_val bigint) engine=InnoDB
2024-07-08 11:08:35,099 [DEBUG] org.hibernate.SQL [main] insert into album_seq values ( 1 )
2024-07-08 11:08:35,103 [DEBUG] org.hibernate.SQL [main] create table photo (id bigint not null, description varchar(255), file_name varchar(255), name varchar(255), original_file_name varchar(255), album_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 11:08:35,116 [DEBUG] org.hibernate.SQL [main] create table photo_seq (next_val bigint) engine=InnoDB
2024-07-08 11:08:35,131 [DEBUG] org.hibernate.SQL [main] insert into photo_seq values ( 1 )
2024-07-08 11:08:35,134 [DEBUG] org.hibernate.SQL [main] alter table account add constraint UK_q0uja26qgu1atulenwup9rxyr unique (email)
2024-07-08 11:08:35,145 [DEBUG] org.hibernate.SQL [main] alter table album add constraint FK5jtlch5qo4kdolwqbfyrf4e02 foreign key (account_id) references account (id)
2024-07-08 11:08:35,167 [DEBUG] org.hibernate.SQL [main] alter table photo add constraint FKpy64km2p72eoy5rwh31ria0vx foreign key (album_id) references album (id)
2024-07-08 11:08:35,196 [INFO] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-07-08 11:08:35,207 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 11:08:36,159 [WARN] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-08 11:08:36,560 [INFO] org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@25511895, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@38f569d, org.springframework.security.web.context.SecurityContextHolderFilter@188058fb, org.springframework.security.web.header.HeaderWriterFilter@1952ad9d, org.springframework.security.web.authentication.logout.LogoutFilter@6329a5b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@329aa2d1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@79d3c655, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@13552290, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6464f017, org.springframework.security.web.session.SessionManagementFilter@5929059c, org.springframework.security.web.access.ExceptionTranslationFilter@145f1f97, org.springframework.security.web.access.intercept.AuthorizationFilter@1c25385a]
2024-07-08 11:08:37,107 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-07-08 11:08:37,123 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Started SpringRestDemoApplication in 7.907 seconds (process running for 8.488)
2024-07-08 11:08:37,524 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 11:08:37,543 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 11:08:37,608 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 11:08:37,885 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 11:08:37,887 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 11:08:37,896 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 11:11:17,039 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 11:11:17,041 [INFO] org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl [SpringApplicationShutdownHook] HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2024-07-08 11:11:17,043 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 11:11:17,057 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 11:11:17,066 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account
2024-07-08 11:11:17,074 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account_seq
2024-07-08 11:11:17,082 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album
2024-07-08 11:11:17,095 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album_seq
2024-07-08 11:11:17,103 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo
2024-07-08 11:11:17,110 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo_seq
2024-07-08 11:11:17,122 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-07-08 11:11:17,131 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-07-08 11:11:18,883 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Starting SpringRestDemoApplication using Java 17.0.11 with PID 43584 (/Users/olaidehammed/Downloads/SpringRestDemo/target/classes started by olaidehammed in /Users/olaidehammed/Downloads/SpringRestDemo)
2024-07-08 11:11:18,885 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-07-08 11:11:20,096 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-08 11:11:20,179 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 70 ms. Found 3 JPA repository interfaces.
2024-07-08 11:11:20,986 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-07-08 11:11:21,002 [INFO] org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2024-07-08 11:11:21,003 [INFO] org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.4]
2024-07-08 11:11:21,115 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2024-07-08 11:11:21,116 [INFO] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2145 ms
2024-07-08 11:11:21,343 [INFO] org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-08 11:11:21,428 [INFO] org.hibernate.Version [main] HHH000412: Hibernate ORM core version 6.1.6.Final
2024-07-08 11:11:21,653 [WARN] org.hibernate.orm.deprecation [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-07-08 11:11:21,820 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2024-07-08 11:11:22,056 [INFO] com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2cbe455c
2024-07-08 11:11:22,058 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2024-07-08 11:11:22,126 [INFO] SQL dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-07-08 11:11:23,356 [DEBUG] org.hibernate.SQL [main] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 11:11:23,373 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.album' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 11:11:23,380 [DEBUG] org.hibernate.SQL [main] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 11:11:23,383 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.photo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 11:11:23,386 [DEBUG] org.hibernate.SQL [main] drop table if exists account
2024-07-08 11:11:23,397 [DEBUG] org.hibernate.SQL [main] drop table if exists account_seq
2024-07-08 11:11:23,421 [DEBUG] org.hibernate.SQL [main] drop table if exists album
2024-07-08 11:11:23,441 [DEBUG] org.hibernate.SQL [main] drop table if exists album_seq
2024-07-08 11:11:23,445 [DEBUG] org.hibernate.SQL [main] drop table if exists photo
2024-07-08 11:11:23,449 [DEBUG] org.hibernate.SQL [main] drop table if exists photo_seq
2024-07-08 11:11:23,458 [DEBUG] org.hibernate.SQL [main] create table account (id bigint not null, authorities varchar(255), email varchar(255), password varchar(255), primary key (id)) engine=InnoDB
2024-07-08 11:11:23,468 [DEBUG] org.hibernate.SQL [main] create table account_seq (next_val bigint) engine=InnoDB
2024-07-08 11:11:23,478 [DEBUG] org.hibernate.SQL [main] insert into account_seq values ( 1 )
2024-07-08 11:11:23,482 [DEBUG] org.hibernate.SQL [main] create table album (id bigint not null, description varchar(255), name varchar(255), account_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 11:11:23,492 [DEBUG] org.hibernate.SQL [main] create table album_seq (next_val bigint) engine=InnoDB
2024-07-08 11:11:23,502 [DEBUG] org.hibernate.SQL [main] insert into album_seq values ( 1 )
2024-07-08 11:11:23,506 [DEBUG] org.hibernate.SQL [main] create table photo (id bigint not null, description varchar(255), file_name varchar(255), name varchar(255), original_file_name varchar(255), album_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 11:11:23,518 [DEBUG] org.hibernate.SQL [main] create table photo_seq (next_val bigint) engine=InnoDB
2024-07-08 11:11:23,528 [DEBUG] org.hibernate.SQL [main] insert into photo_seq values ( 1 )
2024-07-08 11:11:23,532 [DEBUG] org.hibernate.SQL [main] alter table account add constraint UK_q0uja26qgu1atulenwup9rxyr unique (email)
2024-07-08 11:11:23,543 [DEBUG] org.hibernate.SQL [main] alter table album add constraint FK5jtlch5qo4kdolwqbfyrf4e02 foreign key (account_id) references account (id)
2024-07-08 11:11:23,568 [DEBUG] org.hibernate.SQL [main] alter table photo add constraint FKpy64km2p72eoy5rwh31ria0vx foreign key (album_id) references album (id)
2024-07-08 11:11:23,597 [INFO] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-07-08 11:11:23,610 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 11:11:25,378 [WARN] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-08 11:11:25,895 [INFO] org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2f3d5cd, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5dd12c19, org.springframework.security.web.context.SecurityContextHolderFilter@587bf2e1, org.springframework.security.web.header.HeaderWriterFilter@35e7fcf2, org.springframework.security.web.authentication.logout.LogoutFilter@62d21afd, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@70cdbd18, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@20b921be, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4df13b7e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@40696fc6, org.springframework.security.web.session.SessionManagementFilter@2f025e9e, org.springframework.security.web.access.ExceptionTranslationFilter@1fce6eb4, org.springframework.security.web.access.intercept.AuthorizationFilter@5929059c]
2024-07-08 11:11:26,354 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-07-08 11:11:26,372 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Started SpringRestDemoApplication in 8.166 seconds (process running for 8.769)
2024-07-08 11:11:26,602 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 11:11:26,617 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 11:11:26,662 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 11:11:26,851 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 11:11:26,853 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 11:11:26,857 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 11:11:32,945 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-08 11:11:32,946 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-07-08 11:11:32,949 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Completed initialization in 3 ms
2024-07-08 11:11:34,116 [INFO] org.springdoc.api.AbstractOpenApiResource [http-nio-8080-exec-8] Init duration for springdoc-openapi is: 730 ms
2024-07-08 11:11:51,089 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-9] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 11:12:30,375 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 11:12:30,382 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select next_val as id_val from album_seq for update
2024-07-08 11:12:30,384 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] update album_seq set next_val= ? where next_val=?
2024-07-08 11:12:30,390 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] insert into album (account_id, description, name, id) values (?, ?, ?, ?)
2024-07-08 11:13:17,989 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 11:13:18,013 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name from album a1_0 join account a2_0 on a2_0.id=a1_0.account_id where a1_0.id=?
2024-07-08 11:20:09,338 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 11:20:09,340 [INFO] org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl [SpringApplicationShutdownHook] HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2024-07-08 11:20:09,341 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 11:20:09,355 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 11:20:09,367 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account
2024-07-08 11:20:09,401 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account_seq
2024-07-08 11:20:09,410 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album
2024-07-08 11:20:09,419 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album_seq
2024-07-08 11:20:09,425 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo
2024-07-08 11:20:09,432 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo_seq
2024-07-08 11:20:09,441 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-07-08 11:20:09,450 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-07-08 11:20:11,070 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Starting SpringRestDemoApplication using Java 17.0.11 with PID 49774 (/Users/olaidehammed/Downloads/SpringRestDemo/target/classes started by olaidehammed in /Users/olaidehammed/Downloads/SpringRestDemo)
2024-07-08 11:20:11,072 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-07-08 11:20:12,596 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-08 11:20:12,774 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 160 ms. Found 3 JPA repository interfaces.
2024-07-08 11:20:14,423 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-07-08 11:20:14,441 [INFO] org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2024-07-08 11:20:14,442 [INFO] org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.4]
2024-07-08 11:20:14,601 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2024-07-08 11:20:14,602 [INFO] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 3438 ms
2024-07-08 11:20:14,869 [INFO] org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-08 11:20:14,952 [INFO] org.hibernate.Version [main] HHH000412: Hibernate ORM core version 6.1.6.Final
2024-07-08 11:20:15,209 [WARN] org.hibernate.orm.deprecation [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-07-08 11:20:15,427 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2024-07-08 11:20:15,718 [INFO] com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4d0e1a9a
2024-07-08 11:20:15,721 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2024-07-08 11:20:15,791 [INFO] SQL dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-07-08 11:20:17,190 [DEBUG] org.hibernate.SQL [main] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 11:20:17,202 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.album' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 11:20:17,207 [DEBUG] org.hibernate.SQL [main] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 11:20:17,210 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.photo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 11:20:17,212 [DEBUG] org.hibernate.SQL [main] drop table if exists account
2024-07-08 11:20:17,222 [DEBUG] org.hibernate.SQL [main] drop table if exists account_seq
2024-07-08 11:20:17,226 [DEBUG] org.hibernate.SQL [main] drop table if exists album
2024-07-08 11:20:17,230 [DEBUG] org.hibernate.SQL [main] drop table if exists album_seq
2024-07-08 11:20:17,233 [DEBUG] org.hibernate.SQL [main] drop table if exists photo
2024-07-08 11:20:17,237 [DEBUG] org.hibernate.SQL [main] drop table if exists photo_seq
2024-07-08 11:20:17,250 [DEBUG] org.hibernate.SQL [main] create table account (id bigint not null, authorities varchar(255), email varchar(255), password varchar(255), primary key (id)) engine=InnoDB
2024-07-08 11:20:17,314 [DEBUG] org.hibernate.SQL [main] create table account_seq (next_val bigint) engine=InnoDB
2024-07-08 11:20:17,326 [DEBUG] org.hibernate.SQL [main] insert into account_seq values ( 1 )
2024-07-08 11:20:17,329 [DEBUG] org.hibernate.SQL [main] create table album (id bigint not null, description varchar(255), name varchar(255), account_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 11:20:17,341 [DEBUG] org.hibernate.SQL [main] create table album_seq (next_val bigint) engine=InnoDB
2024-07-08 11:20:17,352 [DEBUG] org.hibernate.SQL [main] insert into album_seq values ( 1 )
2024-07-08 11:20:17,356 [DEBUG] org.hibernate.SQL [main] create table photo (id bigint not null, description varchar(255), file_name varchar(255), name varchar(255), original_file_name varchar(255), album_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 11:20:17,368 [DEBUG] org.hibernate.SQL [main] create table photo_seq (next_val bigint) engine=InnoDB
2024-07-08 11:20:17,382 [DEBUG] org.hibernate.SQL [main] insert into photo_seq values ( 1 )
2024-07-08 11:20:17,385 [DEBUG] org.hibernate.SQL [main] alter table account add constraint UK_q0uja26qgu1atulenwup9rxyr unique (email)
2024-07-08 11:20:17,397 [DEBUG] org.hibernate.SQL [main] alter table album add constraint FK5jtlch5qo4kdolwqbfyrf4e02 foreign key (account_id) references account (id)
2024-07-08 11:20:17,425 [DEBUG] org.hibernate.SQL [main] alter table photo add constraint FKpy64km2p72eoy5rwh31ria0vx foreign key (album_id) references album (id)
2024-07-08 11:20:17,451 [INFO] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-07-08 11:20:17,462 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 11:20:18,834 [WARN] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-08 11:20:19,260 [INFO] org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4379fe2a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@e0f2686, org.springframework.security.web.context.SecurityContextHolderFilter@188ab96, org.springframework.security.web.header.HeaderWriterFilter@81cd90e, org.springframework.security.web.authentication.logout.LogoutFilter@5add7380, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@21202507, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@e2696e8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2f3d5cd, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2e27325d, org.springframework.security.web.session.SessionManagementFilter@5837cb9e, org.springframework.security.web.access.ExceptionTranslationFilter@256c6f7a, org.springframework.security.web.access.intercept.AuthorizationFilter@58a9e64d]
2024-07-08 11:20:19,564 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-07-08 11:20:19,580 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Started SpringRestDemoApplication in 9.099 seconds (process running for 9.62)
2024-07-08 11:20:19,773 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 11:20:19,791 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 11:20:19,830 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 11:20:19,975 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 11:20:19,976 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 11:20:19,980 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 11:20:42,662 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-08 11:20:42,663 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-07-08 11:20:42,665 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-07-08 11:20:43,900 [INFO] org.springdoc.api.AbstractOpenApiResource [http-nio-8080-exec-8] Init duration for springdoc-openapi is: 926 ms
2024-07-08 11:20:58,397 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-9] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 11:21:38,110 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 11:21:38,115 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select next_val as id_val from album_seq for update
2024-07-08 11:21:38,118 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] update album_seq set next_val= ? where next_val=?
2024-07-08 11:21:38,124 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] insert into album (account_id, description, name, id) values (?, ?, ?, ?)
2024-07-08 11:22:29,113 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 11:22:29,137 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name from album a1_0 join account a2_0 on a2_0.id=a1_0.account_id where a1_0.id=?
2024-07-08 11:22:29,152 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select next_val as id_val from photo_seq for update
2024-07-08 11:22:29,153 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] update photo_seq set next_val= ? where next_val=?
2024-07-08 11:22:29,158 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] insert into photo (album_id, description, file_name, name, original_file_name, id) values (?, ?, ?, ?, ?, ?)
2024-07-08 11:22:29,171 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select next_val as id_val from photo_seq for update
2024-07-08 11:22:29,172 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] update photo_seq set next_val= ? where next_val=?
2024-07-08 11:22:29,177 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] insert into photo (album_id, description, file_name, name, original_file_name, id) values (?, ?, ?, ?, ?, ?)
2024-07-08 11:25:03,517 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 11:25:03,519 [INFO] org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl [SpringApplicationShutdownHook] HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2024-07-08 11:25:03,520 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 11:25:03,544 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 11:25:03,580 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account
2024-07-08 11:25:03,593 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account_seq
2024-07-08 11:25:03,603 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album
2024-07-08 11:25:03,613 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album_seq
2024-07-08 11:25:03,621 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo
2024-07-08 11:25:03,632 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo_seq
2024-07-08 11:25:03,645 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-07-08 11:25:03,660 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-07-08 11:25:05,243 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Starting SpringRestDemoApplication using Java 17.0.11 with PID 53246 (/Users/olaidehammed/Downloads/SpringRestDemo/target/classes started by olaidehammed in /Users/olaidehammed/Downloads/SpringRestDemo)
2024-07-08 11:25:05,247 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-07-08 11:25:06,468 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-08 11:25:06,585 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 102 ms. Found 3 JPA repository interfaces.
2024-07-08 11:25:07,484 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-07-08 11:25:07,566 [INFO] org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2024-07-08 11:25:07,566 [INFO] org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.4]
2024-07-08 11:25:07,709 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2024-07-08 11:25:07,710 [INFO] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2378 ms
2024-07-08 11:25:07,933 [INFO] org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-08 11:25:08,010 [INFO] org.hibernate.Version [main] HHH000412: Hibernate ORM core version 6.1.6.Final
2024-07-08 11:25:08,265 [WARN] org.hibernate.orm.deprecation [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-07-08 11:25:08,460 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2024-07-08 11:25:08,760 [INFO] com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6b3d9c38
2024-07-08 11:25:08,762 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2024-07-08 11:25:08,828 [INFO] SQL dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-07-08 11:25:09,795 [DEBUG] org.hibernate.SQL [main] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 11:25:09,809 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.album' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 11:25:09,814 [DEBUG] org.hibernate.SQL [main] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 11:25:09,817 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.photo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 11:25:09,821 [DEBUG] org.hibernate.SQL [main] drop table if exists account
2024-07-08 11:25:09,827 [DEBUG] org.hibernate.SQL [main] drop table if exists account_seq
2024-07-08 11:25:09,830 [DEBUG] org.hibernate.SQL [main] drop table if exists album
2024-07-08 11:25:09,833 [DEBUG] org.hibernate.SQL [main] drop table if exists album_seq
2024-07-08 11:25:09,837 [DEBUG] org.hibernate.SQL [main] drop table if exists photo
2024-07-08 11:25:09,840 [DEBUG] org.hibernate.SQL [main] drop table if exists photo_seq
2024-07-08 11:25:09,846 [DEBUG] org.hibernate.SQL [main] create table account (id bigint not null, authorities varchar(255), email varchar(255), password varchar(255), primary key (id)) engine=InnoDB
2024-07-08 11:25:09,858 [DEBUG] org.hibernate.SQL [main] create table account_seq (next_val bigint) engine=InnoDB
2024-07-08 11:25:09,867 [DEBUG] org.hibernate.SQL [main] insert into account_seq values ( 1 )
2024-07-08 11:25:09,871 [DEBUG] org.hibernate.SQL [main] create table album (id bigint not null, description varchar(255), name varchar(255), account_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 11:25:09,880 [DEBUG] org.hibernate.SQL [main] create table album_seq (next_val bigint) engine=InnoDB
2024-07-08 11:25:09,890 [DEBUG] org.hibernate.SQL [main] insert into album_seq values ( 1 )
2024-07-08 11:25:09,893 [DEBUG] org.hibernate.SQL [main] create table photo (id bigint not null, description varchar(255), file_name varchar(255), name varchar(255), original_file_name varchar(255), album_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 11:25:09,905 [DEBUG] org.hibernate.SQL [main] create table photo_seq (next_val bigint) engine=InnoDB
2024-07-08 11:25:09,913 [DEBUG] org.hibernate.SQL [main] insert into photo_seq values ( 1 )
2024-07-08 11:25:09,916 [DEBUG] org.hibernate.SQL [main] alter table account add constraint UK_q0uja26qgu1atulenwup9rxyr unique (email)
2024-07-08 11:25:09,927 [DEBUG] org.hibernate.SQL [main] alter table album add constraint FK5jtlch5qo4kdolwqbfyrf4e02 foreign key (account_id) references account (id)
2024-07-08 11:25:09,957 [DEBUG] org.hibernate.SQL [main] alter table photo add constraint FKpy64km2p72eoy5rwh31ria0vx foreign key (album_id) references album (id)
2024-07-08 11:25:09,985 [INFO] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-07-08 11:25:09,996 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 11:25:11,197 [WARN] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-08 11:25:11,550 [INFO] org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7c919e1e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@bddac1c, org.springframework.security.web.context.SecurityContextHolderFilter@70cdbd18, org.springframework.security.web.header.HeaderWriterFilter@6e53bb4f, org.springframework.security.web.authentication.logout.LogoutFilter@44a0e68f, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@2e27325d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2f3d5cd, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@20a3321a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1c7fd2e0, org.springframework.security.web.session.SessionManagementFilter@6705fb02, org.springframework.security.web.access.ExceptionTranslationFilter@232be28d, org.springframework.security.web.access.intercept.AuthorizationFilter@1ab717f3]
2024-07-08 11:25:11,841 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-07-08 11:25:11,855 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Started SpringRestDemoApplication in 7.182 seconds (process running for 7.781)
2024-07-08 11:25:12,029 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 11:25:12,041 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 11:25:12,072 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 11:25:12,225 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 11:25:12,227 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 11:25:12,230 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 11:25:20,784 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-08 11:25:20,785 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-07-08 11:25:20,787 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Completed initialization in 2 ms
2024-07-08 11:25:21,632 [INFO] org.springdoc.api.AbstractOpenApiResource [http-nio-8080-exec-8] Init duration for springdoc-openapi is: 535 ms
2024-07-08 11:25:34,757 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-9] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 11:26:16,828 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 11:26:16,834 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select next_val as id_val from album_seq for update
2024-07-08 11:26:16,835 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] update album_seq set next_val= ? where next_val=?
2024-07-08 11:26:16,842 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] insert into album (account_id, description, name, id) values (?, ?, ?, ?)
2024-07-08 11:26:56,995 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 11:26:57,012 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name from album a1_0 join account a2_0 on a2_0.id=a1_0.account_id where a1_0.id=?
2024-07-08 11:26:57,025 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select next_val as id_val from photo_seq for update
2024-07-08 11:26:57,026 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] update photo_seq set next_val= ? where next_val=?
2024-07-08 11:26:57,031 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] insert into photo (album_id, description, file_name, name, original_file_name, id) values (?, ?, ?, ?, ?, ?)
2024-07-08 11:26:58,013 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select next_val as id_val from photo_seq for update
2024-07-08 11:26:58,015 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] update photo_seq set next_val= ? where next_val=?
2024-07-08 11:26:58,031 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] insert into photo (album_id, description, file_name, name, original_file_name, id) values (?, ?, ?, ?, ?, ?)
2024-07-08 12:15:51,385 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2m42s361ms).
2024-07-08 12:19:38,676 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m17s265ms).
2024-07-08 12:20:12,539 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 12:20:12,544 [INFO] org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl [SpringApplicationShutdownHook] HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2024-07-08 12:20:12,550 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 12:20:12,601 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 12:20:12,612 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account
2024-07-08 12:20:12,626 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account_seq
2024-07-08 12:20:12,636 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album
2024-07-08 12:20:12,648 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album_seq
2024-07-08 12:20:12,658 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo
2024-07-08 12:20:12,665 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo_seq
2024-07-08 12:20:12,686 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-07-08 12:20:12,696 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-07-08 12:20:14,608 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Starting SpringRestDemoApplication using Java 17.0.11 with PID 89773 (/Users/olaidehammed/Downloads/SpringRestDemo/target/classes started by olaidehammed in /Users/olaidehammed/Downloads/SpringRestDemo)
2024-07-08 12:20:14,611 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-07-08 12:20:16,248 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-08 12:20:16,424 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 146 ms. Found 3 JPA repository interfaces.
2024-07-08 12:20:17,534 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-07-08 12:20:17,556 [INFO] org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2024-07-08 12:20:17,557 [INFO] org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.4]
2024-07-08 12:20:17,711 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2024-07-08 12:20:17,713 [INFO] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 3000 ms
2024-07-08 12:20:18,002 [INFO] org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-08 12:20:18,105 [INFO] org.hibernate.Version [main] HHH000412: Hibernate ORM core version 6.1.6.Final
2024-07-08 12:20:18,400 [WARN] org.hibernate.orm.deprecation [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-07-08 12:20:18,676 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2024-07-08 12:20:19,043 [INFO] com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6b6def36
2024-07-08 12:20:19,047 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2024-07-08 12:20:19,137 [INFO] SQL dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-07-08 12:20:20,252 [DEBUG] org.hibernate.SQL [main] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 12:20:20,266 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.album' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 12:20:20,274 [DEBUG] org.hibernate.SQL [main] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 12:20:20,277 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.photo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 12:20:20,280 [DEBUG] org.hibernate.SQL [main] drop table if exists account
2024-07-08 12:20:20,288 [DEBUG] org.hibernate.SQL [main] drop table if exists account_seq
2024-07-08 12:20:20,291 [DEBUG] org.hibernate.SQL [main] drop table if exists album
2024-07-08 12:20:20,296 [DEBUG] org.hibernate.SQL [main] drop table if exists album_seq
2024-07-08 12:20:20,300 [DEBUG] org.hibernate.SQL [main] drop table if exists photo
2024-07-08 12:20:20,303 [DEBUG] org.hibernate.SQL [main] drop table if exists photo_seq
2024-07-08 12:20:20,312 [DEBUG] org.hibernate.SQL [main] create table account (id bigint not null, authorities varchar(255), email varchar(255), password varchar(255), primary key (id)) engine=InnoDB
2024-07-08 12:20:20,328 [DEBUG] org.hibernate.SQL [main] create table account_seq (next_val bigint) engine=InnoDB
2024-07-08 12:20:20,338 [DEBUG] org.hibernate.SQL [main] insert into account_seq values ( 1 )
2024-07-08 12:20:20,342 [DEBUG] org.hibernate.SQL [main] create table album (id bigint not null, description varchar(255), name varchar(255), account_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 12:20:20,354 [DEBUG] org.hibernate.SQL [main] create table album_seq (next_val bigint) engine=InnoDB
2024-07-08 12:20:20,365 [DEBUG] org.hibernate.SQL [main] insert into album_seq values ( 1 )
2024-07-08 12:20:20,369 [DEBUG] org.hibernate.SQL [main] create table photo (id bigint not null, description varchar(255), file_name varchar(255), name varchar(255), original_file_name varchar(255), album_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 12:20:20,380 [DEBUG] org.hibernate.SQL [main] create table photo_seq (next_val bigint) engine=InnoDB
2024-07-08 12:20:20,389 [DEBUG] org.hibernate.SQL [main] insert into photo_seq values ( 1 )
2024-07-08 12:20:20,393 [DEBUG] org.hibernate.SQL [main] alter table account add constraint UK_q0uja26qgu1atulenwup9rxyr unique (email)
2024-07-08 12:20:20,407 [DEBUG] org.hibernate.SQL [main] alter table album add constraint FK5jtlch5qo4kdolwqbfyrf4e02 foreign key (account_id) references account (id)
2024-07-08 12:20:20,434 [DEBUG] org.hibernate.SQL [main] alter table photo add constraint FKpy64km2p72eoy5rwh31ria0vx foreign key (album_id) references album (id)
2024-07-08 12:20:20,462 [INFO] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-07-08 12:20:20,474 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 12:20:21,809 [WARN] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-08 12:20:22,303 [INFO] org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@530bd77b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@58a9e64d, org.springframework.security.web.context.SecurityContextHolderFilter@256c6f7a, org.springframework.security.web.header.HeaderWriterFilter@72115c48, org.springframework.security.web.authentication.logout.LogoutFilter@2ba9765b, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@63a9af28, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@81cd90e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6e53bb4f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7657d29f, org.springframework.security.web.session.SessionManagementFilter@1d884a19, org.springframework.security.web.access.ExceptionTranslationFilter@13868c41, org.springframework.security.web.access.intercept.AuthorizationFilter@6cac0334]
2024-07-08 12:20:22,685 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-07-08 12:20:22,700 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Started SpringRestDemoApplication in 8.847 seconds (process running for 9.474)
2024-07-08 12:20:22,889 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 12:20:22,903 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 12:20:22,942 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 12:20:23,079 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 12:20:23,080 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 12:20:23,084 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 12:20:58,748 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-08 12:20:58,749 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-07-08 12:20:58,751 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Completed initialization in 2 ms
2024-07-08 12:20:59,908 [INFO] org.springdoc.api.AbstractOpenApiResource [http-nio-8080-exec-8] Init duration for springdoc-openapi is: 629 ms
2024-07-08 12:21:22,020 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-9] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 12:22:35,675 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 12:22:35,681 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] select next_val as id_val from album_seq for update
2024-07-08 12:22:35,683 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] update album_seq set next_val= ? where next_val=?
2024-07-08 12:22:35,690 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] insert into album (account_id, description, name, id) values (?, ?, ?, ?)
2024-07-08 12:23:31,943 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 12:23:31,963 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name from album a1_0 join account a2_0 on a2_0.id=a1_0.account_id where a1_0.id=?
2024-07-08 12:23:31,976 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select next_val as id_val from photo_seq for update
2024-07-08 12:23:31,977 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] update photo_seq set next_val= ? where next_val=?
2024-07-08 12:23:31,983 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] insert into photo (album_id, description, file_name, name, original_file_name, id) values (?, ?, ?, ?, ?, ?)
2024-07-08 12:23:32,284 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select next_val as id_val from photo_seq for update
2024-07-08 12:23:32,285 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] update photo_seq set next_val= ? where next_val=?
2024-07-08 12:23:32,288 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] insert into photo (album_id, description, file_name, name, original_file_name, id) values (?, ?, ?, ?, ?, ?)
2024-07-08 13:00:21,151 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m1s654ms).
2024-07-08 13:06:34,544 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=3m43s381ms).
2024-07-08 13:38:24,418 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=14m17s169ms).
2024-07-08 13:42:41,381 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m16s964ms).
2024-07-08 13:56:53,340 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=6m11s912ms).
2024-07-08 14:08:10,400 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m16s972ms).
2024-07-08 14:15:11,587 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=7m1s187ms).
2024-07-08 18:20:47,671 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=3h7m4s192ms).
2024-07-08 18:30:55,529 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=9m37s287ms).
2024-07-08 18:42:03,896 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=10m38s364ms).
2024-07-08 18:46:20,968 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m17s72ms).
2024-07-08 19:02:20,035 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=15m29s58ms).
2024-07-08 19:18:49,338 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=15m29s291ms).
2024-07-08 19:29:51,002 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=10m31s643ms).
2024-07-08 19:31:34,181 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m13s171ms).
2024-07-08 20:13:39,844 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=42m5s663ms).
2024-07-08 21:05:37,205 [WARN] com.zaxxer.hikari.pool.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=26m43s541ms).
2024-07-08 21:41:49,995 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 21:41:50,012 [INFO] org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl [SpringApplicationShutdownHook] HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2024-07-08 21:41:50,023 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 21:41:50,161 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 21:41:50,177 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account
2024-07-08 21:41:50,195 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account_seq
2024-07-08 21:41:50,206 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album
2024-07-08 21:41:50,217 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album_seq
2024-07-08 21:41:50,228 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo
2024-07-08 21:41:50,236 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo_seq
2024-07-08 21:41:50,255 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-07-08 21:41:50,270 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-07-08 21:42:00,055 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Starting SpringRestDemoApplication using Java 17.0.11 with PID 2582 (/Users/olaidehammed/Downloads/SpringRestDemo/target/classes started by olaidehammed in /Users/olaidehammed/Downloads/SpringRestDemo)
2024-07-08 21:42:00,058 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-07-08 21:42:01,433 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-08 21:42:01,536 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 92 ms. Found 3 JPA repository interfaces.
2024-07-08 21:42:02,834 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-07-08 21:42:02,854 [INFO] org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2024-07-08 21:42:02,856 [INFO] org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.4]
2024-07-08 21:42:03,033 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2024-07-08 21:42:03,034 [INFO] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2899 ms
2024-07-08 21:42:03,438 [INFO] org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-08 21:42:03,548 [INFO] org.hibernate.Version [main] HHH000412: Hibernate ORM core version 6.1.6.Final
2024-07-08 21:42:04,308 [WARN] org.hibernate.orm.deprecation [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-07-08 21:42:04,869 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2024-07-08 21:42:05,794 [INFO] com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6b6def36
2024-07-08 21:42:05,804 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2024-07-08 21:42:06,162 [INFO] SQL dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-07-08 21:42:13,352 [DEBUG] org.hibernate.SQL [main] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 21:42:13,374 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.album' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 21:42:13,381 [DEBUG] org.hibernate.SQL [main] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 21:42:13,385 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.photo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 21:42:13,391 [DEBUG] org.hibernate.SQL [main] drop table if exists account
2024-07-08 21:42:13,406 [DEBUG] org.hibernate.SQL [main] drop table if exists account_seq
2024-07-08 21:42:13,411 [DEBUG] org.hibernate.SQL [main] drop table if exists album
2024-07-08 21:42:13,418 [DEBUG] org.hibernate.SQL [main] drop table if exists album_seq
2024-07-08 21:42:13,421 [DEBUG] org.hibernate.SQL [main] drop table if exists photo
2024-07-08 21:42:13,424 [DEBUG] org.hibernate.SQL [main] drop table if exists photo_seq
2024-07-08 21:42:13,432 [DEBUG] org.hibernate.SQL [main] create table account (id bigint not null, authorities varchar(255), email varchar(255), password varchar(255), primary key (id)) engine=InnoDB
2024-07-08 21:42:13,462 [DEBUG] org.hibernate.SQL [main] create table account_seq (next_val bigint) engine=InnoDB
2024-07-08 21:42:13,475 [DEBUG] org.hibernate.SQL [main] insert into account_seq values ( 1 )
2024-07-08 21:42:13,481 [DEBUG] org.hibernate.SQL [main] create table album (id bigint not null, description varchar(255), name varchar(255), account_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 21:42:13,495 [DEBUG] org.hibernate.SQL [main] create table album_seq (next_val bigint) engine=InnoDB
2024-07-08 21:42:13,508 [DEBUG] org.hibernate.SQL [main] insert into album_seq values ( 1 )
2024-07-08 21:42:13,511 [DEBUG] org.hibernate.SQL [main] create table photo (id bigint not null, description varchar(255), file_name varchar(255), name varchar(255), original_file_name varchar(255), album_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 21:42:13,526 [DEBUG] org.hibernate.SQL [main] create table photo_seq (next_val bigint) engine=InnoDB
2024-07-08 21:42:13,536 [DEBUG] org.hibernate.SQL [main] insert into photo_seq values ( 1 )
2024-07-08 21:42:13,541 [DEBUG] org.hibernate.SQL [main] alter table account add constraint UK_q0uja26qgu1atulenwup9rxyr unique (email)
2024-07-08 21:42:13,561 [DEBUG] org.hibernate.SQL [main] alter table album add constraint FK5jtlch5qo4kdolwqbfyrf4e02 foreign key (account_id) references account (id)
2024-07-08 21:42:13,600 [DEBUG] org.hibernate.SQL [main] alter table photo add constraint FKpy64km2p72eoy5rwh31ria0vx foreign key (album_id) references album (id)
2024-07-08 21:42:13,641 [INFO] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-07-08 21:42:13,652 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 21:42:28,524 [WARN] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-08 21:42:28,987 [INFO] org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@63a9af28, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@105cdf61, org.springframework.security.web.context.SecurityContextHolderFilter@62d21afd, org.springframework.security.web.header.HeaderWriterFilter@13868c41, org.springframework.security.web.authentication.logout.LogoutFilter@553d828a, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@44a0e68f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@256c6f7a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@232be28d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@530bd77b, org.springframework.security.web.session.SessionManagementFilter@1952ad9d, org.springframework.security.web.access.ExceptionTranslationFilter@70ccb3bf, org.springframework.security.web.access.intercept.AuthorizationFilter@34376069]
2024-07-08 21:42:29,412 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-07-08 21:42:29,432 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Started SpringRestDemoApplication in 29.879 seconds (process running for 30.41)
2024-07-08 21:42:29,730 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 21:42:29,750 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 21:42:29,801 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 21:42:29,984 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 21:42:29,985 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 21:42:29,989 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 21:43:34,686 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 21:43:34,688 [INFO] org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl [SpringApplicationShutdownHook] HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2024-07-08 21:43:34,690 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 21:43:34,719 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 21:43:34,745 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account
2024-07-08 21:43:34,761 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account_seq
2024-07-08 21:43:34,775 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album
2024-07-08 21:43:34,793 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album_seq
2024-07-08 21:43:34,807 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo
2024-07-08 21:43:34,825 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo_seq
2024-07-08 21:43:34,843 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-07-08 21:43:34,865 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-07-08 21:43:36,399 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Starting SpringRestDemoApplication using Java 17.0.11 with PID 3692 (/Users/olaidehammed/Downloads/SpringRestDemo/target/classes started by olaidehammed in /Users/olaidehammed/Downloads/SpringRestDemo)
2024-07-08 21:43:36,403 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-07-08 21:43:37,693 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-08 21:43:37,778 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 76 ms. Found 3 JPA repository interfaces.
2024-07-08 21:43:38,991 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-07-08 21:43:39,033 [INFO] org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2024-07-08 21:43:39,035 [INFO] org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.4]
2024-07-08 21:43:39,299 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2024-07-08 21:43:39,300 [INFO] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2791 ms
2024-07-08 21:43:39,764 [INFO] org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-08 21:43:39,899 [INFO] org.hibernate.Version [main] HHH000412: Hibernate ORM core version 6.1.6.Final
2024-07-08 21:43:40,348 [WARN] org.hibernate.orm.deprecation [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-07-08 21:43:40,705 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2024-07-08 21:43:43,443 [INFO] com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2fba0dac
2024-07-08 21:43:43,812 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2024-07-08 21:43:44,244 [INFO] SQL dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-07-08 21:43:45,344 [DEBUG] org.hibernate.SQL [main] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 21:43:45,358 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.album' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 21:43:45,364 [DEBUG] org.hibernate.SQL [main] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 21:43:45,366 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.photo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 21:43:45,372 [DEBUG] org.hibernate.SQL [main] drop table if exists account
2024-07-08 21:43:45,379 [DEBUG] org.hibernate.SQL [main] drop table if exists account_seq
2024-07-08 21:43:45,383 [DEBUG] org.hibernate.SQL [main] drop table if exists album
2024-07-08 21:43:45,386 [DEBUG] org.hibernate.SQL [main] drop table if exists album_seq
2024-07-08 21:43:45,390 [DEBUG] org.hibernate.SQL [main] drop table if exists photo
2024-07-08 21:43:45,394 [DEBUG] org.hibernate.SQL [main] drop table if exists photo_seq
2024-07-08 21:43:45,403 [DEBUG] org.hibernate.SQL [main] create table account (id bigint not null, authorities varchar(255), email varchar(255), password varchar(255), primary key (id)) engine=InnoDB
2024-07-08 21:43:45,416 [DEBUG] org.hibernate.SQL [main] create table account_seq (next_val bigint) engine=InnoDB
2024-07-08 21:43:45,430 [DEBUG] org.hibernate.SQL [main] insert into account_seq values ( 1 )
2024-07-08 21:43:45,434 [DEBUG] org.hibernate.SQL [main] create table album (id bigint not null, description varchar(255), name varchar(255), account_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 21:43:45,449 [DEBUG] org.hibernate.SQL [main] create table album_seq (next_val bigint) engine=InnoDB
2024-07-08 21:43:45,461 [DEBUG] org.hibernate.SQL [main] insert into album_seq values ( 1 )
2024-07-08 21:43:45,465 [DEBUG] org.hibernate.SQL [main] create table photo (id bigint not null, description varchar(255), file_name varchar(255), name varchar(255), original_file_name varchar(255), album_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 21:43:45,479 [DEBUG] org.hibernate.SQL [main] create table photo_seq (next_val bigint) engine=InnoDB
2024-07-08 21:43:45,490 [DEBUG] org.hibernate.SQL [main] insert into photo_seq values ( 1 )
2024-07-08 21:43:45,494 [DEBUG] org.hibernate.SQL [main] alter table account add constraint UK_q0uja26qgu1atulenwup9rxyr unique (email)
2024-07-08 21:43:45,507 [DEBUG] org.hibernate.SQL [main] alter table album add constraint FK5jtlch5qo4kdolwqbfyrf4e02 foreign key (account_id) references account (id)
2024-07-08 21:43:45,540 [DEBUG] org.hibernate.SQL [main] alter table photo add constraint FKpy64km2p72eoy5rwh31ria0vx foreign key (album_id) references album (id)
2024-07-08 21:43:45,575 [INFO] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-07-08 21:43:45,583 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 21:43:51,324 [WARN] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-08 21:43:52,043 [INFO] org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6ace3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@d3b0397, org.springframework.security.web.context.SecurityContextHolderFilter@65fa56f7, org.springframework.security.web.header.HeaderWriterFilter@779136bf, org.springframework.security.web.authentication.logout.LogoutFilter@6a4d57b7, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@58a9e64d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@69c6e5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6b7a0f18, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1ab717f3, org.springframework.security.web.session.SessionManagementFilter@256c6f7a, org.springframework.security.web.access.ExceptionTranslationFilter@1d982fbe, org.springframework.security.web.access.intercept.AuthorizationFilter@4505015b]
2024-07-08 21:43:52,447 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-07-08 21:43:52,469 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Started SpringRestDemoApplication in 16.682 seconds (process running for 17.223)
2024-07-08 21:43:52,681 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 21:43:52,699 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 21:43:52,740 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 21:43:52,890 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 21:43:52,891 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 21:43:52,897 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 21:44:45,808 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-08 21:44:45,809 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-07-08 21:44:45,812 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Completed initialization in 2 ms
2024-07-08 21:44:47,104 [INFO] org.springdoc.api.AbstractOpenApiResource [http-nio-8080-exec-8] Init duration for springdoc-openapi is: 797 ms
2024-07-08 21:45:05,823 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-9] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 21:45:50,147 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 21:45:50,154 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] select next_val as id_val from album_seq for update
2024-07-08 21:45:50,155 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] update album_seq set next_val= ? where next_val=?
2024-07-08 21:45:50,161 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] insert into album (account_id, description, name, id) values (?, ?, ?, ?)
2024-07-08 21:46:34,030 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 21:46:34,047 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name from album a1_0 join account a2_0 on a2_0.id=a1_0.account_id where a1_0.id=?
2024-07-08 21:46:34,062 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select next_val as id_val from photo_seq for update
2024-07-08 21:46:34,064 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] update photo_seq set next_val= ? where next_val=?
2024-07-08 21:46:34,069 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] insert into photo (album_id, description, file_name, name, original_file_name, id) values (?, ?, ?, ?, ?, ?)
2024-07-08 21:46:35,086 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select next_val as id_val from photo_seq for update
2024-07-08 21:46:35,088 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] update photo_seq set next_val= ? where next_val=?
2024-07-08 21:46:35,091 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] insert into photo (album_id, description, file_name, name, original_file_name, id) values (?, ?, ?, ?, ?, ?)
2024-07-08 21:49:15,173 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-8] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 21:49:15,181 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-8] select a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name from album a1_0 join account a2_0 on a2_0.id=a1_0.account_id where a1_0.id=?
2024-07-08 21:49:15,203 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-8] select p1_0.id,a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name,p1_0.description,p1_0.file_name,p1_0.name,p1_0.original_file_name from photo p1_0 join album a1_0 on a1_0.id=p1_0.album_id left join account a2_0 on a2_0.id=a1_0.account_id where p1_0.id=?
2024-07-08 21:49:54,531 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-1] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 21:49:54,536 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-1] select a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name from album a1_0 join account a2_0 on a2_0.id=a1_0.account_id where a1_0.id=?
2024-07-08 21:49:54,546 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-1] select p1_0.id,a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name,p1_0.description,p1_0.file_name,p1_0.name,p1_0.original_file_name from photo p1_0 join album a1_0 on a1_0.id=p1_0.album_id left join account a2_0 on a2_0.id=a1_0.account_id where p1_0.id=?
2024-07-08 22:02:49,584 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 22:02:49,587 [INFO] org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl [SpringApplicationShutdownHook] HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2024-07-08 22:02:49,589 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 22:02:49,611 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 22:02:49,666 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account
2024-07-08 22:02:49,686 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account_seq
2024-07-08 22:02:49,700 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album
2024-07-08 22:02:49,709 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album_seq
2024-07-08 22:02:49,723 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo
2024-07-08 22:02:49,735 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo_seq
2024-07-08 22:02:49,751 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-07-08 22:02:49,772 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-07-08 22:02:51,635 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Starting SpringRestDemoApplication using Java 17.0.11 with PID 16821 (/Users/olaidehammed/Downloads/SpringRestDemo/target/classes started by olaidehammed in /Users/olaidehammed/Downloads/SpringRestDemo)
2024-07-08 22:02:51,637 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-07-08 22:02:59,256 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-08 22:02:59,500 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 228 ms. Found 3 JPA repository interfaces.
2024-07-08 22:03:05,997 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-07-08 22:03:06,015 [INFO] org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2024-07-08 22:03:06,017 [INFO] org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.4]
2024-07-08 22:03:06,249 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2024-07-08 22:03:06,250 [INFO] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 14501 ms
2024-07-08 22:03:06,528 [INFO] org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-08 22:03:06,604 [INFO] org.hibernate.Version [main] HHH000412: Hibernate ORM core version 6.1.6.Final
2024-07-08 22:03:06,903 [WARN] org.hibernate.orm.deprecation [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-07-08 22:03:07,160 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2024-07-08 22:03:07,517 [INFO] com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5ce3409b
2024-07-08 22:03:07,520 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2024-07-08 22:03:07,590 [INFO] SQL dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-07-08 22:03:15,519 [DEBUG] org.hibernate.SQL [main] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 22:03:15,539 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.album' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 22:03:15,546 [DEBUG] org.hibernate.SQL [main] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 22:03:15,549 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.photo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 22:03:15,553 [DEBUG] org.hibernate.SQL [main] drop table if exists account
2024-07-08 22:03:15,569 [DEBUG] org.hibernate.SQL [main] drop table if exists account_seq
2024-07-08 22:03:15,572 [DEBUG] org.hibernate.SQL [main] drop table if exists album
2024-07-08 22:03:15,578 [DEBUG] org.hibernate.SQL [main] drop table if exists album_seq
2024-07-08 22:03:15,582 [DEBUG] org.hibernate.SQL [main] drop table if exists photo
2024-07-08 22:03:15,586 [DEBUG] org.hibernate.SQL [main] drop table if exists photo_seq
2024-07-08 22:03:15,595 [DEBUG] org.hibernate.SQL [main] create table account (id bigint not null, authorities varchar(255), email varchar(255), password varchar(255), primary key (id)) engine=InnoDB
2024-07-08 22:03:15,613 [DEBUG] org.hibernate.SQL [main] create table account_seq (next_val bigint) engine=InnoDB
2024-07-08 22:03:15,627 [DEBUG] org.hibernate.SQL [main] insert into account_seq values ( 1 )
2024-07-08 22:03:15,630 [DEBUG] org.hibernate.SQL [main] create table album (id bigint not null, description varchar(255), name varchar(255), account_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 22:03:15,642 [DEBUG] org.hibernate.SQL [main] create table album_seq (next_val bigint) engine=InnoDB
2024-07-08 22:03:15,654 [DEBUG] org.hibernate.SQL [main] insert into album_seq values ( 1 )
2024-07-08 22:03:15,659 [DEBUG] org.hibernate.SQL [main] create table photo (id bigint not null, description varchar(255), file_name varchar(255), name varchar(255), original_file_name varchar(255), album_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 22:03:15,672 [DEBUG] org.hibernate.SQL [main] create table photo_seq (next_val bigint) engine=InnoDB
2024-07-08 22:03:15,682 [DEBUG] org.hibernate.SQL [main] insert into photo_seq values ( 1 )
2024-07-08 22:03:15,686 [DEBUG] org.hibernate.SQL [main] alter table account add constraint UK_q0uja26qgu1atulenwup9rxyr unique (email)
2024-07-08 22:03:15,699 [DEBUG] org.hibernate.SQL [main] alter table album add constraint FK5jtlch5qo4kdolwqbfyrf4e02 foreign key (account_id) references account (id)
2024-07-08 22:03:15,735 [DEBUG] org.hibernate.SQL [main] alter table photo add constraint FKpy64km2p72eoy5rwh31ria0vx foreign key (album_id) references album (id)
2024-07-08 22:03:15,770 [INFO] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-07-08 22:03:15,780 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 22:03:21,333 [WARN] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-08 22:03:22,362 [INFO] org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@103033fe, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@25511895, org.springframework.security.web.context.SecurityContextHolderFilter@6b7a0f18, org.springframework.security.web.header.HeaderWriterFilter@58d4fe33, org.springframework.security.web.authentication.logout.LogoutFilter@6cac0334, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@67683210, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@914ab92, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@74d3b331, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@38f569d, org.springframework.security.web.session.SessionManagementFilter@6e53bb4f, org.springframework.security.web.access.ExceptionTranslationFilter@4d24ab25, org.springframework.security.web.access.intercept.AuthorizationFilter@e638553]
2024-07-08 22:03:22,911 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-07-08 22:03:22,931 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Started SpringRestDemoApplication in 31.893 seconds (process running for 32.57)
2024-07-08 22:03:23,159 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 22:03:23,174 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 22:03:23,211 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 22:03:23,358 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 22:03:23,359 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 22:03:23,366 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 22:03:51,894 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-08 22:03:51,895 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-07-08 22:03:51,896 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-07-08 22:03:52,848 [INFO] org.springdoc.api.AbstractOpenApiResource [http-nio-8080-exec-8] Init duration for springdoc-openapi is: 646 ms
2024-07-08 22:04:26,166 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-9] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 22:05:02,130 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-5] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 22:05:02,136 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-5] select next_val as id_val from album_seq for update
2024-07-08 22:05:02,138 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-5] update album_seq set next_val= ? where next_val=?
2024-07-08 22:05:02,158 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-5] insert into album (account_id, description, name, id) values (?, ?, ?, ?)
2024-07-08 22:05:12,948 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 22:05:12,960 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] select a1_0.id,a1_0.account_id,a1_0.description,a1_0.name from album a1_0 where a1_0.account_id=?
2024-07-08 22:05:44,557 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 22:05:44,564 [INFO] org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl [SpringApplicationShutdownHook] HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2024-07-08 22:05:44,567 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 22:05:44,667 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 22:05:44,748 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account
2024-07-08 22:05:44,792 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists account_seq
2024-07-08 22:05:44,877 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album
2024-07-08 22:05:44,914 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists album_seq
2024-07-08 22:05:44,942 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo
2024-07-08 22:05:45,056 [DEBUG] org.hibernate.SQL [SpringApplicationShutdownHook] drop table if exists photo_seq
2024-07-08 22:05:45,377 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-07-08 22:05:45,463 [INFO] com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-07-08 22:05:47,564 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Starting SpringRestDemoApplication using Java 17.0.11 with PID 18774 (/Users/olaidehammed/Downloads/SpringRestDemo/target/classes started by olaidehammed in /Users/olaidehammed/Downloads/SpringRestDemo)
2024-07-08 22:05:47,567 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-07-08 22:05:48,632 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-08 22:05:48,749 [INFO] org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 84 ms. Found 3 JPA repository interfaces.
2024-07-08 22:05:54,316 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-07-08 22:05:54,366 [INFO] org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2024-07-08 22:05:54,367 [INFO] org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.4]
2024-07-08 22:05:54,606 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2024-07-08 22:05:54,607 [INFO] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 6948 ms
2024-07-08 22:05:55,072 [INFO] org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-08 22:05:55,171 [INFO] org.hibernate.Version [main] HHH000412: Hibernate ORM core version 6.1.6.Final
2024-07-08 22:05:55,544 [WARN] org.hibernate.orm.deprecation [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-07-08 22:05:55,815 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2024-07-08 22:05:56,294 [INFO] com.zaxxer.hikari.pool.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@b5c902
2024-07-08 22:05:56,296 [INFO] com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2024-07-08 22:05:56,379 [INFO] SQL dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-07-08 22:05:57,580 [DEBUG] org.hibernate.SQL [main] alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02
2024-07-08 22:05:57,600 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table album drop foreign key FK5jtlch5qo4kdolwqbfyrf4e02" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.album' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 22:05:57,610 [DEBUG] org.hibernate.SQL [main] alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx
2024-07-08 22:05:57,624 [WARN] org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table photo drop foreign key FKpy64km2p72eoy5rwh31ria0vx" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:373)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:336)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.olahammed.SpringRestDemo.SpringRestDemoApplication.main(SpringRestDemoApplication.java:14)
Caused by: java.sql.SQLSyntaxErrorException: Table 'albumsdb.photo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 37 common frames omitted
2024-07-08 22:05:57,631 [DEBUG] org.hibernate.SQL [main] drop table if exists account
2024-07-08 22:05:57,640 [DEBUG] org.hibernate.SQL [main] drop table if exists account_seq
2024-07-08 22:05:57,643 [DEBUG] org.hibernate.SQL [main] drop table if exists album
2024-07-08 22:05:57,647 [DEBUG] org.hibernate.SQL [main] drop table if exists album_seq
2024-07-08 22:05:57,651 [DEBUG] org.hibernate.SQL [main] drop table if exists photo
2024-07-08 22:05:57,655 [DEBUG] org.hibernate.SQL [main] drop table if exists photo_seq
2024-07-08 22:05:57,679 [DEBUG] org.hibernate.SQL [main] create table account (id bigint not null, authorities varchar(255), email varchar(255), password varchar(255), primary key (id)) engine=InnoDB
2024-07-08 22:05:57,696 [DEBUG] org.hibernate.SQL [main] create table account_seq (next_val bigint) engine=InnoDB
2024-07-08 22:05:57,708 [DEBUG] org.hibernate.SQL [main] insert into account_seq values ( 1 )
2024-07-08 22:05:57,712 [DEBUG] org.hibernate.SQL [main] create table album (id bigint not null, description varchar(255), name varchar(255), account_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 22:05:57,724 [DEBUG] org.hibernate.SQL [main] create table album_seq (next_val bigint) engine=InnoDB
2024-07-08 22:05:57,736 [DEBUG] org.hibernate.SQL [main] insert into album_seq values ( 1 )
2024-07-08 22:05:57,739 [DEBUG] org.hibernate.SQL [main] create table photo (id bigint not null, description varchar(255), file_name varchar(255), name varchar(255), original_file_name varchar(255), album_id bigint not null, primary key (id)) engine=InnoDB
2024-07-08 22:05:57,753 [DEBUG] org.hibernate.SQL [main] create table photo_seq (next_val bigint) engine=InnoDB
2024-07-08 22:05:57,763 [DEBUG] org.hibernate.SQL [main] insert into photo_seq values ( 1 )
2024-07-08 22:05:57,767 [DEBUG] org.hibernate.SQL [main] alter table account add constraint UK_q0uja26qgu1atulenwup9rxyr unique (email)
2024-07-08 22:05:57,781 [DEBUG] org.hibernate.SQL [main] alter table album add constraint FK5jtlch5qo4kdolwqbfyrf4e02 foreign key (account_id) references account (id)
2024-07-08 22:05:57,811 [DEBUG] org.hibernate.SQL [main] alter table photo add constraint FKpy64km2p72eoy5rwh31ria0vx foreign key (album_id) references album (id)
2024-07-08 22:05:57,843 [INFO] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-07-08 22:05:57,853 [INFO] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-08 22:06:06,118 [WARN] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-08 22:06:06,535 [INFO] org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@755a90a6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5862ab28, org.springframework.security.web.context.SecurityContextHolderFilter@42ea14b8, org.springframework.security.web.header.HeaderWriterFilter@62d21afd, org.springframework.security.web.authentication.logout.LogoutFilter@49bc1f6c, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@38f569d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@74d3b331, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@e2696e8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@21202507, org.springframework.security.web.session.SessionManagementFilter@188058fb, org.springframework.security.web.access.ExceptionTranslationFilter@71c74011, org.springframework.security.web.access.intercept.AuthorizationFilter@567baa55]
2024-07-08 22:06:06,861 [INFO] org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-07-08 22:06:06,877 [INFO] com.olahammed.SpringRestDemo.SpringRestDemoApplication [main] Started SpringRestDemoApplication in 19.863 seconds (process running for 20.581)
2024-07-08 22:06:07,089 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 22:06:07,101 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 22:06:07,129 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 22:06:07,319 [DEBUG] org.hibernate.SQL [main] select next_val as id_val from account_seq for update
2024-07-08 22:06:07,322 [DEBUG] org.hibernate.SQL [main] update account_seq set next_val= ? where next_val=?
2024-07-08 22:06:07,330 [DEBUG] org.hibernate.SQL [main] insert into account (authorities, email, password, id) values (?, ?, ?, ?)
2024-07-08 22:06:07,380 [INFO] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-08 22:06:07,380 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-07-08 22:06:07,382 [INFO] org.springframework.web.servlet.DispatcherServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-07-08 22:06:08,682 [INFO] org.springdoc.api.AbstractOpenApiResource [http-nio-8080-exec-8] Init duration for springdoc-openapi is: 930 ms
2024-07-08 22:06:25,706 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-9] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 22:06:59,783 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 22:06:59,790 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select next_val as id_val from album_seq for update
2024-07-08 22:06:59,792 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] update album_seq set next_val= ? where next_val=?
2024-07-08 22:06:59,798 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] insert into album (account_id, description, name, id) values (?, ?, ?, ?)
2024-07-08 22:07:10,682 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 22:07:10,694 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-4] select a1_0.id,a1_0.account_id,a1_0.description,a1_0.name from album a1_0 where a1_0.account_id=?
2024-07-08 22:07:46,307 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 22:07:46,325 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name from album a1_0 join account a2_0 on a2_0.id=a1_0.account_id where a1_0.id=?
2024-07-08 22:07:46,340 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select next_val as id_val from photo_seq for update
2024-07-08 22:07:46,342 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] update photo_seq set next_val= ? where next_val=?
2024-07-08 22:07:46,346 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] insert into photo (album_id, description, file_name, name, original_file_name, id) values (?, ?, ?, ?, ?, ?)
2024-07-08 22:07:47,381 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] select next_val as id_val from photo_seq for update
2024-07-08 22:07:47,382 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] update photo_seq set next_val= ? where next_val=?
2024-07-08 22:07:47,386 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-6] insert into photo (album_id, description, file_name, name, original_file_name, id) values (?, ?, ?, ?, ?, ?)
2024-07-08 22:08:03,932 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-7] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 22:08:03,937 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-7] select a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name from album a1_0 join account a2_0 on a2_0.id=a1_0.account_id where a1_0.id=?
2024-07-08 22:08:03,945 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-7] select p1_0.id,a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name,p1_0.description,p1_0.file_name,p1_0.name,p1_0.original_file_name from photo p1_0 join album a1_0 on a1_0.id=p1_0.album_id left join account a2_0 on a2_0.id=a1_0.account_id where p1_0.id=?
2024-07-08 22:08:43,975 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-9] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 22:08:43,980 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-9] select a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name from album a1_0 join account a2_0 on a2_0.id=a1_0.account_id where a1_0.id=?
2024-07-08 22:08:43,985 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-9] select p1_0.id,a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name,p1_0.description,p1_0.file_name,p1_0.name,p1_0.original_file_name from photo p1_0 join album a1_0 on a1_0.id=p1_0.album_id left join account a2_0 on a2_0.id=a1_0.account_id where p1_0.id=?
2024-07-08 22:09:15,721 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select a1_0.id,a1_0.authorities,a1_0.email,a1_0.password from account a1_0 where a1_0.email=?
2024-07-08 22:09:15,727 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name from album a1_0 join account a2_0 on a2_0.id=a1_0.account_id where a1_0.id=?
2024-07-08 22:09:15,733 [DEBUG] org.hibernate.SQL [http-nio-8080-exec-10] select p1_0.id,a1_0.id,a2_0.id,a2_0.authorities,a2_0.email,a2_0.password,a1_0.description,a1_0.name,p1_0.description,p1_0.file_name,p1_0.name,p1_0.original_file_name from photo p1_0 join album a1_0 on a1_0.id=p1_0.album_id left join account a2_0 on a2_0.id=a1_0.account_id where p1_0.id=?
